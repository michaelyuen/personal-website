(function(){"use strict";var t=this,i=t.Chart,e=function(t){this.canvas=t.canvas,this.ctx=t;var i=function(t,i){return t["offset"+i]?t["offset"+i]:document.defaultView.getComputedStyle(t).getPropertyValue(i)},e=this.width=i(t.canvas,"Width"),n=this.height=i(t.canvas,"Height");t.canvas.width=e,t.canvas.height=n;var e=this.width=t.canvas.width,n=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,s.retinaScale(this),this};e.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},e.types={};var s=e.helpers={},n=s.each=function(t,i,e){var s=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var n;for(n=0;n<t.length;n++)i.apply(e,[t[n],n].concat(s))}else for(var o in t)i.apply(e,[t[o],o].concat(s))},o=s.clone=function(t){var i={};return n(t,function(e,s){t.hasOwnProperty(s)&&(i[s]=e)}),i},a=s.extend=function(t){return n(Array.prototype.slice.call(arguments,1),function(i){n(i,function(e,s){i.hasOwnProperty(s)&&(t[s]=e)})}),t},h=s.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=s.indexOf=function(t,i){if(Array.prototype.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1},r=(s.where=function(t,i){var e=[];return s.each(t,function(t){i(t)&&e.push(t)}),e},s.findNextWhere=function(t,i,e){e||(e=-1);for(var s=e+1;s<t.length;s++){var n=t[s];if(i(n))return n}},s.findPreviousWhere=function(t,i,e){e||(e=t.length);for(var s=e-1;s>=0;s--){var n=t[s];if(i(n))return n}},s.inherits=function(t){var i=this,e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},s=function(){this.constructor=e};return s.prototype=i.prototype,e.prototype=new s,e.extend=r,t&&a(e.prototype,t),e.__super__=i.prototype,e}),c=s.noop=function(){},u=s.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=s.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=s.amd="function"==typeof define&&define.amd,f=s.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=s.max=function(t){return Math.max.apply(Math,t)},m=s.min=function(t){return Math.min.apply(Math,t)},v=(s.cap=function(t,i,e){if(f(i)){if(t>i)return i}else if(f(e)&&e>t)return e;return t},s.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),S=s.radians=function(t){return t*(Math.PI/180)},x=(s.getAngleFromPoint=function(t,i){var e=i.x-t.x,s=i.y-t.y,n=Math.sqrt(e*e+s*s),o=2*Math.PI+Math.atan2(s,e);return 0>e&&0>s&&(o+=2*Math.PI),{angle:o,distance:n}},s.aliasPixel=function(t){return t%2===0?0:.5}),y=(s.splineCurve=function(t,i,e,s){var n=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),o=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),a=s*n/(n+o),h=s*o/(n+o);return{inner:{x:i.x-a*(e.x-t.x),y:i.y-a*(e.y-t.y)},outer:{x:i.x+h*(e.x-t.x),y:i.y+h*(e.y-t.y)}}},s.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),C=(s.calculateScaleRange=function(t,i,e,s,n){var o=2,a=Math.floor(i/(1.5*e)),h=o>=a,l=g(t),r=m(t);l===r&&(l+=.5,r>=.5&&!s?r-=.5:l+=.5);for(var c=Math.abs(l-r),u=y(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=s?0:Math.floor(r/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,v=Math.pow(10,u),S=Math.round(f/v);(S>a||a>2*S)&&!h;)if(S>a)v*=2,S=Math.round(f/v),S%1!==0&&(h=!0);else if(n&&u>=0){if(v/2%1!==0)break;v/=2,S=Math.round(f/v)}else v/=2,S=Math.round(f/v);return h&&(S=o,v=f/S),{steps:S,stepValue:v,min:p,max:p+S*v}},s.template=function(t,i){function e(t,i){var e=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[t]=s[t];return i?e(i):e}if(t instanceof Function)return t(i);var s={};return e(t,i)}),w=(s.generateLabels=function(t,i,e,s){var o=new Array(i);return labelTemplateString&&n(o,function(i,n){o[n]=C(t,{value:e+s*(n+1)})}),o},s.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)))},easeOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),s*Math.pow(2,-10*t)*Math.sin(2*(1*t-i)*Math.PI/e)+1)},easeInOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:2==(t/=.5)?1:(e||(e=.3*1.5),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e):s*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)*.5+1)},easeInBack:function(t){var i=1.70158;return 1*(t/=1)*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return 1*((t=t/1-1)*t*((i+1)*t+i)+1)},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},easeInBounce:function(t){return 1-w.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*w.easeInBounce(2*t):.5*w.easeOutBounce(2*t-1)+.5}}),b=s.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),P=s.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),L=(s.animationLoop=function(t,i,e,s,n,o){var a=0,h=w[e]||w.linear,l=function(){a++;var e=a/i,r=h(e);t.call(o,r,e,a),s.call(o,r,e),i>a?o.animationFrame=b(l):n.apply(o)};b(l)},s.getRelativePosition=function(t){var i,e,s=t.originalEvent||t,n=t.currentTarget||t.srcElement,o=n.getBoundingClientRect();return s.touches?(i=s.touches[0].clientX-o.left,e=s.touches[0].clientY-o.top):(i=s.clientX-o.left,e=s.clientY-o.top),{x:i,y:e}},s.addEvent=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e}),k=s.removeEvent=function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent?t.detachEvent("on"+i,e):t["on"+i]=c},F=(s.bindEvents=function(t,i,e){t.events||(t.events={}),n(i,function(i){t.events[i]=function(){e.apply(t,arguments)},L(t.chart.canvas,i,t.events[i])})},s.unbindEvents=function(t,i){n(i,function(i,e){k(t.chart.canvas,e,i)})}),R=s.getMaximumWidth=function(t){var i=t.parentNode;return i.clientWidth},T=s.getMaximumHeight=function(t){var i=t.parentNode;return i.clientHeight},A=(s.getMaximumSize=s.getMaximumWidth,s.retinaScale=function(t){var i=t.ctx,e=t.canvas.width,s=t.canvas.height;window.devicePixelRatio&&(i.canvas.style.width=e+"px",i.canvas.style.height=s+"px",i.canvas.height=s*window.devicePixelRatio,i.canvas.width=e*window.devicePixelRatio,i.scale(window.devicePixelRatio,window.devicePixelRatio))}),M=s.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},W=s.fontString=function(t,i,e){return i+" "+t+"px "+e},z=s.longestText=function(t,i,e){t.font=i;var s=0;return n(e,function(i){var e=t.measureText(i).width;s=e>s?e:s}),s},B=s.drawRoundedRectangle=function(t,i,e,s,n,o){t.beginPath(),t.moveTo(i+o,e),t.lineTo(i+s-o,e),t.quadraticCurveTo(i+s,e,i+s,e+o),t.lineTo(i+s,e+n-o),t.quadraticCurveTo(i+s,e+n,i+s-o,e+n),t.lineTo(i+o,e+n),t.quadraticCurveTo(i,e+n,i,e+n-o),t.lineTo(i,e+o),t.quadraticCurveTo(i,e,i+o,e),t.closePath()};e.instances={},e.Type=function(t,i,s){this.options=i,this.chart=s,this.id=u(),e.instances[this.id]=this,i.responsive&&this.resize(),this.initialize.call(this,t)},a(e.Type.prototype,{initialize:function(){return this},clear:function(){return M(this.chart),this},stop:function(){return P(this.animationFrame),this},resize:function(t){this.stop();var i=this.chart.canvas,e=R(this.chart.canvas),s=this.options.maintainAspectRatio?e/this.chart.aspectRatio:T(this.chart.canvas);return i.width=this.chart.width=e,i.height=this.chart.height=s,A(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){return t&&this.reflow(),this.options.animation&&!t?s.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return C(this.options.legendTemplate,this)},destroy:function(){this.clear(),F(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete e.instances[this.id]},showTooltip:function(t,i){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var i=!1;return t.length!==this.activeElements.length?i=!0:(n(t,function(t,e){t!==this.activeElements[e]&&(i=!0)},this),i)}.call(this,t);if(o||i){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,h,r=this.datasets.length-1;r>=0&&(a=this.datasets[r].points||this.datasets[r].bars||this.datasets[r].segments,h=l(a,t[0]),-1===h);r--);var c=[],u=[],d=function(){var t,i,e,n,o,a=[],l=[],r=[];return s.each(this.datasets,function(i){t=i.points||i.bars||i.segments,t[h]&&t[h].hasValue()&&a.push(t[h])}),s.each(a,function(t){l.push(t.x),r.push(t.y),c.push(s.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=m(r),e=g(r),n=m(l),i=g(l),{x:n>this.chart.width/2?n:i,y:(o+e)/2}}.call(this,h);new e.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else n(t,function(t){var i=t.tooltipPosition();new e.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:C(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),e.Type.extend=function(t){var i=this,s=function(){return i.apply(this,arguments)};if(s.prototype=o(i.prototype),a(s.prototype,t),s.extend=e.Type.extend,t.name||i.prototype.name){var n=t.name||i.prototype.name,l=e.defaults[i.prototype.name]?o(e.defaults[i.prototype.name]):{};e.defaults[n]=a(l,t.defaults),e.types[n]=s,e.prototype[n]=function(t,i){var o=h(e.defaults.global,e.defaults[n],i||{});return new s(t,o,this)}}else d("Name not provided for this chart, so it hasn't been registered");return i},e.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(e.Element.prototype,{initialize:function(){},restore:function(t){return t?n(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return n(t,function(t,i){this._saved[i]=this[i],this[i]=t},this),this},transition:function(t,i){return n(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),e.Element.extend=r,e.Point=e.Element.extend({display:!0,inRange:function(t,i){var e=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(i-this.y,2)<Math.pow(e,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),e.Arc=e.Element.extend({inRange:function(t,i){var e=s.getAngleFromPoint(this,{x:t,y:i}),n=e.angle>=this.startAngle&&e.angle<=this.endAngle,o=e.distance>=this.innerRadius&&e.distance<=this.outerRadius;return n&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,i=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*i,y:this.y+Math.sin(t)*i}},draw:function(t){var i=this.ctx;i.beginPath(),i.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),i.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),i.closePath(),i.strokeStyle=this.strokeColor,i.lineWidth=this.strokeWidth,i.fillStyle=this.fillColor,i.fill(),i.lineJoin="bevel",this.showStroke&&i.stroke()}}),e.Rectangle=e.Element.extend({draw:function(){var t=this.ctx,i=this.width/2,e=this.x-i,s=this.x+i,n=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(e+=o,s-=o,n+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(e,this.base),t.lineTo(e,n),t.lineTo(s,n),t.lineTo(s,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,i){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&i>=this.y&&i<=this.base}}),e.Tooltip=e.Element.extend({draw:function(){var t=this.chart.ctx;t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var i=this.caretPadding=2,e=t.measureText(this.text).width+2*this.xPadding,s=this.fontSize+2*this.yPadding,n=s+this.caretHeight+i;this.x+e/2>this.chart.width?this.xAlign="left":this.x-e/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var o=this.x-e/2,a=this.y-n;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-i),t.lineTo(this.x+this.caretHeight,this.y-(i+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(i+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+i+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+i),t.lineTo(this.x+this.caretHeight,this.y+i+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+i+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-e+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}B(t,o,a,e,s,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+e/2,a+s/2)}}}),e.MultiTooltip=e.Element.extend({initialize:function(){this.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=W(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=z(this.ctx,this.font,this.labels)+this.fontSize+3,e=g([i,t]);this.width=e+2*this.xPadding;var s=this.height/2;this.y-s<0?this.y=s:this.y+s>this.chart.height&&(this.y=this.chart.height-s),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var i=this.y-this.height/2+this.yPadding,e=t-1;return 0===t?i+this.titleFontSize/2:i+(1.5*this.fontSize*e+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{B(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,s.each(this.labels,function(i,e){t.fillStyle=this.textColor,t.fillText(i,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(e+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[e].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),e.Scale=e.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?z(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,i,e=this.ctx.measureText(this.xLabels[0]).width,s=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=s/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var n,o=z(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)n=Math.cos(S(this.xLabelRotation)),t=n*e,i=n*s,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(S(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var i=this.drawingArea()/(this.min-this.max);return this.endPoint-i*(t-this.min)},calculateX:function(t){var i=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),e=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),s=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(s+=e/2),Math.round(s)},update:function(t){s.extend(this,t),this.fit()},draw:function(){var t=this.ctx,i=(this.endPoint-this.startPoint)/this.steps,e=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,n(this.yLabels,function(n,o){var a=this.endPoint-i*o,h=Math.round(a),l=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(n,e-10,a),0!==o||l||(l=!0),l&&t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),h+=s.aliasPixel(t.lineWidth),l&&(t.moveTo(e,h),t.lineTo(this.width,h),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(e-5,h),t.lineTo(e,h),t.stroke(),t.closePath()},this),n(this.xLabels,function(i,e){var s=this.calculateX(e)+x(this.lineWidth),n=this.calculateX(e-(this.offsetGridLines?.5:0))+x(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==e||a||(a=!0),a&&t.beginPath(),e>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a&&(t.moveTo(n,this.endPoint),t.lineTo(n,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n,this.endPoint),t.lineTo(n,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(s,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*S(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(i,0,0),t.restore()},this))}}),e.RadialScale=e.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var i=this.drawingArea/(this.max-this.min);return(t-this.min)*i},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,i,e,s,n,o,a,h,l,r,c,u,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),i=0;i<this.valuesCount;i++)t=this.getPointPosition(i,d),e=this.ctx.measureText(C(this.templateString,{value:this.labels[i]})).width+5,0===i||i===this.valuesCount/2?(s=e/2,t.x+s>p&&(p=t.x+s,n=i),t.x-s<g&&(g=t.x-s,a=i)):i<this.valuesCount/2?t.x+e>p&&(p=t.x+e,n=i):i>this.valuesCount/2&&t.x-e<g&&(g=t.x-e,a=i);l=g,r=Math.ceil(p-this.width),o=this.getIndexAngle(n),h=this.getIndexAngle(a),c=r/Math.sin(o+Math.PI/2),u=l/Math.sin(h+Math.PI/2),c=f(c)?c:0,u=f(u)?u:0,this.drawingArea=d-(u+c)/2,this.setCenterPoint(u,c)},setCenterPoint:function(t,i){var e=this.width-i-this.drawingArea,s=t+this.drawingArea;this.xCenter=(s+e)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var i=2*Math.PI/this.valuesCount;return t*i-Math.PI/2},getPointPosition:function(t,i){var e=this.getIndexAngle(t);return{x:Math.cos(e)*i+this.xCenter,y:Math.sin(e)*i+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(n(this.yLabels,function(i,e){if(e>0){var s,n=e*(this.drawingArea/this.steps),o=this.yCenter-n;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,n,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)s=this.getPointPosition(a,this.calculateCenterOffset(this.min+e*this.stepValue)),0===a?t.moveTo(s.x,s.y):t.lineTo(s.x,s.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var h=t.measureText(i).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-h/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(i,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var e=this.getPointPosition(i,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(e.x,e.y),t.stroke(),t.closePath()}var s=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);t.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,h=a/2,l=h>i||i>o-h,r=i===h||i===o-h;t.textAlign=0===i?"center":i===a?"center":a>i?"left":"right",t.textBaseline=r?"middle":l?"bottom":"top",t.fillText(this.labels[i],s.x,s.y)}}}}}),s.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){n(e.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return e}):"object"==typeof module&&module.exports&&(module.exports=e),t.Chart=e,e.noConflict=function(){return t.Chart=i,e}}).call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Bar",defaults:s,initialize:function(t){var s=this.options;this.ScaleClass=i.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,i,e){var n=this.calculateBaseWidth(),o=this.calculateX(e)-n/2,a=this.calculateBarWidth(t);return o+a*i+i*s.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*s.barValueSpacing},calculateBarWidth:function(t){var i=this.calculateBaseWidth()-(t-1)*s.barDatasetSpacing;return i/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),this.BarClass=i.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.bars.push(new this.BarClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,i,s){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,s,i),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){e.each(this.datasets,function(i,s){e.each(i.bars,t,this,s)},this)},getBarsAtEvent:function(t){for(var i,s=[],n=e.getRelativePosition(t),o=function(t){s.push(t.bars[i])},a=0;a<this.datasets.length;a++)for(i=0;i<this.datasets[a].bars.length;i++)if(this.datasets[a].bars[i].inRange(n.x,n.y))return e.each(this.datasets,o),s;return s},buildScale:function(t){var i=this,s=function(){var t=[];return i.eachBars(function(i){t.push(i.value)}),t},n={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(n,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(n)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor
}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();this.chart.ctx;this.scale.draw(i),e.each(this.datasets,function(t,s){e.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,s,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Doughnut",defaults:s,initialize:function(t){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=i.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.calculateTotal(t),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),e||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,function(t){t.restore(["fillColor"])}),e.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),i.types.Doughnut.extend({name:"Pie",defaults:e.merge(s,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Line",defaults:s,initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,i){e.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(s.x,s.y)&&i.push(t)})},this),i},buildScale:function(t){var s=this,n=function(){var t=[];return s.eachPoints(function(i){t.push(i.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(o,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(o)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var s=this.chart.ctx,n=function(t){return null!==t.value},o=function(t,i,s){return e.findNextWhere(i,n,s)||t},a=function(t,i,s){return e.findPreviousWhere(i,n,s)||t};this.scale.draw(i),e.each(this.datasets,function(t){var h=e.where(t.points,n);e.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this),this.options.bezierCurve&&e.each(h,function(t,i){var s=i>0&&i<h.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(a(t,h,i),t,o(t,h,i),s),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(h,function(t,i){if(0===i)s.moveTo(t.x,t.y);else if(this.options.bezierCurve){var e=a(t,h,i);s.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else s.lineTo(t.x,t.y)},this),s.stroke(),this.options.datasetFill&&h.length>0&&(s.lineTo(h[h.length-1].x,this.scale.endPoint),s.lineTo(h[0].x,this.scale.endPoint),s.fillStyle=t.fillColor,s.closePath(),s.fill()),e.each(h,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"PolarArea",defaults:s,initialize:function(t){this.segments=[],this.SegmentArc=i.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),e||(this.reflow(),this.update())},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[];e.each(t,function(t){i.push(t.value)});var s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers;i.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){var o;this.scale.animation||(o=this.scale.getPointPosition(n,this.scale.calculateCenterOffset(e))),s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=e.getRelativePosition(t),s=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},i),n=2*Math.PI/this.scale.valuesCount,o=Math.round((s.angle-1.5*Math.PI)/n),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),s.distance<=this.scale.drawingArea&&e.each(this.datasets,function(t){a.push(t.points[o])}),a},buildScale:function(t){this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return e.each(t,function(t){t.data?i=i.concat(t.data):e.each(t.points,function(t){i.push(t.value)})}),i}(),s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s)},addData:function(t,i){this.scale.valuesCount++,e.each(t,function(t,e){var s=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:s.x,y:s.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(i),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var i=t||1,s=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,function(t){e.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(t.points,function(t,i){0===i?s.moveTo(t.x,t.y):s.lineTo(t.x,t.y)},this),s.closePath(),s.stroke(),s.fillStyle=t.fillColor,s.fill(),e.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this);(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["angular","chart.js"],factory)}else if(typeof exports==="object"){module.exports=factory(require("angular"),require("chart.js"))}else{factory(angular,Chart)}})(function(angular,Chart){"use strict";Chart.defaults.global.responsive=true;Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>";Chart.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];angular.module("chart.js",[]).provider("ChartJs",ChartJsProvider).factory("ChartJsFactory",["ChartJs",ChartJsFactory]).directive("chartBase",function(ChartJsFactory){return new ChartJsFactory}).directive("chartLine",function(ChartJsFactory){return new ChartJsFactory("Line")}).directive("chartBar",function(ChartJsFactory){return new ChartJsFactory("Bar")}).directive("chartRadar",function(ChartJsFactory){return new ChartJsFactory("Radar")}).directive("chartDoughnut",function(ChartJsFactory){return new ChartJsFactory("Doughnut")}).directive("chartPie",function(ChartJsFactory){return new ChartJsFactory("Pie")}).directive("chartPolarArea",function(ChartJsFactory){return new ChartJsFactory("PolarArea")});function ChartJsProvider(){var options={};var ChartJs={Chart:Chart,getOptions:function(type){var typeOptions=type&&options[type]||{};return angular.extend({},options,typeOptions)}};this.setOptions=function(type,customOptions){if(!customOptions){customOptions=type;options=angular.extend(options,customOptions);return}options[type]=angular.extend(options[type]||{},customOptions)};this.$get=function(){return ChartJs}}function ChartJsFactory(ChartJs){return function chart(type){return{restrict:"CA",scope:{data:"=",labels:"=",options:"=",series:"=",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=",hover:"="},link:function(scope,elem){var chart,container=document.createElement("div");container.className="chart-container";elem.replaceWith(container);container.appendChild(elem[0]);if(typeof window.G_vmlCanvasManager==="object"&&window.G_vmlCanvasManager!==null){if(typeof window.G_vmlCanvasManager.initElement==="function"){window.G_vmlCanvasManager.initElement(elem[0])}}scope.$watch("data",function(newVal,oldVal){if(!newVal||!newVal.length||Array.isArray(newVal[0])&&!newVal[0].length)return;var chartType=type||scope.chartType;if(!chartType)return;if(chart){if(canUpdateChart(newVal,oldVal))return updateChart(chart,newVal,scope);chart.destroy()}chart=createChart(chartType,scope,elem)},true);scope.$watch("series",resetChart,true);scope.$watch("labels",resetChart,true);scope.$watch("options",resetChart,true);scope.$watch("colours",resetChart,true);scope.$watch("chartType",function(newVal,oldVal){if(isEmpty(newVal))return;if(angular.equals(newVal,oldVal))return;if(chart)chart.destroy();chart=createChart(newVal,scope,elem)});scope.$on("$destroy",function(){if(chart)chart.destroy()});function resetChart(newVal,oldVal){if(isEmpty(newVal))return;if(angular.equals(newVal,oldVal))return;var chartType=type||scope.chartType;if(!chartType)return;if(chart)chart.destroy();chart=createChart(chartType,scope,elem)}}}};function canUpdateChart(newVal,oldVal){if(newVal&&oldVal&&newVal.length&&oldVal.length){return Array.isArray(newVal[0])?newVal.length===oldVal.length&&newVal[0].length===oldVal[0].length:oldVal.reduce(sum,0)>0?newVal.length===oldVal.length:false}return false}function sum(carry,val){return carry+val}function createChart(type,scope,elem){if(!scope.data||!scope.data.length)return;scope.getColour=typeof scope.getColour==="function"?scope.getColour:getRandomColour;scope.colours=getColours(type,scope);var cvs=elem[0],ctx=cvs.getContext("2d");var data=Array.isArray(scope.data[0])?getDataSets(scope.labels,scope.data,scope.series||[],scope.colours):getData(scope.labels,scope.data,scope.colours);var options=angular.extend({},ChartJs.getOptions(type),scope.options);var chart=new ChartJs.Chart(ctx)[type](data,options);scope.$emit("create",chart);["hover","click"].forEach(function(action){if(scope[action])cvs[action==="click"?"onclick":"onmousemove"]=getEventHandler(scope,chart,action)});if(scope.legend&&scope.legend!=="false")setLegend(elem,chart);return chart}function getEventHandler(scope,chart,action){return function(evt){var atEvent=chart.getPointsAtEvent||chart.getBarsAtEvent||chart.getSegmentsAtEvent;if(atEvent){var activePoints=atEvent.call(chart,evt);scope[action](activePoints,evt);scope.$apply()}}}function getColours(type,scope){var colours=angular.copy(scope.colours||ChartJs.getOptions(type).colours||Chart.defaults.global.colours);while(colours.length<scope.data.length){colours.push(scope.getColour())}return colours.map(convertColour)}function convertColour(colour){if(typeof colour==="object"&&colour!==null)return colour;if(typeof colour==="string"&&colour[0]==="#")return getColour(hexToRgb(colour.substr(1)));return getRandomColour()}function getRandomColour(){var colour=[getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)];return getColour(colour)}function getColour(colour){return{fillColor:rgba(colour,.2),strokeColor:rgba(colour,1),pointColor:rgba(colour,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:rgba(colour,.8)}}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}function rgba(colour,alpha){return"rgba("+colour.concat(alpha).join(",")+")"}function hexToRgb(hex){var bigint=parseInt(hex,16),r=bigint>>16&255,g=bigint>>8&255,b=bigint&255;return[r,g,b]}function getDataSets(labels,data,series,colours){return{labels:labels,datasets:data.map(function(item,i){var dataSet=angular.copy(colours[i]);dataSet.label=series[i];dataSet.data=item;return dataSet})}}function getData(labels,data,colours){return labels.map(function(label,i){return{label:label,value:data[i],color:colours[i].strokeColor,highlight:colours[i].pointHighlightStroke}})}function setLegend(elem,chart){var $parent=elem.parent(),$oldLegend=$parent.find("chart-legend"),legend="<chart-legend>"+chart.generateLegend()+"</chart-legend>";if($oldLegend.length)$oldLegend.replaceWith(legend);else $parent.append(legend)}function updateChart(chart,values,scope){if(Array.isArray(scope.data[0])){chart.datasets.forEach(function(dataset,i){(dataset.points||dataset.bars).forEach(function(dataItem,j){dataItem.value=values[i][j]})})}else{chart.segments.forEach(function(segment,i){segment.value=values[i]})}chart.update();scope.$emit("update",chart)}function isEmpty(value){return!value||Array.isArray(value)&&!value.length||typeof value==="object"&&!Object.keys(value).length}}});(function(){var a;a=function(a){return["gravatarService",function(b){var c;return c=function(a,b){var c,d,e;d={};for(c in b)e=b[c],0===c.indexOf(a)&&(c=c.substr(a.length).toLowerCase(),c.length>0&&(d[c]=e));return d},{restrict:"A",link:function(d,e,f){var g,h,i,j;g=a?"gravatarSrcOnce":"gravatarSrc",h=f[g],delete f[g],i=c("gravatar",f),j=d.$watch(h,function(c){if(a){if(null==c)return;j()}e.attr("src",b.url(c,i))})}}}]},angular.module("ui.gravatar",["md5"]).provider("gravatarService",function(){var a,b,c;return b=this,a=/^[0-9a-f]{32}$/i,c=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(""+b+"="+encodeURIComponent(d));return c.join("&")},this.defaults={},this.secure=!1,this.protocol=null,this.$get=["md5",function(d){return{url:function(e,f){var g,h,i,j;return null==e&&(e=""),null==f&&(f={}),f=angular.extend(angular.copy(b.defaults),f),i=b.protocol?b.protocol+":":"",j=b.secure?"https://secure":i+"//www",e=a.test(e)?e:d(e),h=[j,".gravatar.com/avatar/",e],g=c(f),g.length>0&&h.push("?"+g),h.join("")}}}],this}).directive("gravatarSrc",a()).directive("gravatarSrcOnce",a(!0))}).call(this);angular.module("md5",[]).factory("md5",function(){function a(a){return c(b(d(a)))}function b(a){return f(g(e(a),8*a.length))}function c(a){try{}catch(b){o=0}for(var c,d=o?"0123456789ABCDEF":"0123456789abcdef",e="",f=0;f<a.length;f++)c=a.charCodeAt(f),e+=d.charAt(c>>>4&15)+d.charAt(15&c);return e}function d(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|b>>>6&31,128|63&b):65535>=b?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d}function e(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b}function f(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b}function g(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,n=d,o=e,p=f;c=i(c,d,e,f,a[g+0],7,-680876936),f=i(f,c,d,e,a[g+1],12,-389564586),e=i(e,f,c,d,a[g+2],17,606105819),d=i(d,e,f,c,a[g+3],22,-1044525330),c=i(c,d,e,f,a[g+4],7,-176418897),f=i(f,c,d,e,a[g+5],12,1200080426),e=i(e,f,c,d,a[g+6],17,-1473231341),d=i(d,e,f,c,a[g+7],22,-45705983),c=i(c,d,e,f,a[g+8],7,1770035416),f=i(f,c,d,e,a[g+9],12,-1958414417),e=i(e,f,c,d,a[g+10],17,-42063),d=i(d,e,f,c,a[g+11],22,-1990404162),c=i(c,d,e,f,a[g+12],7,1804603682),f=i(f,c,d,e,a[g+13],12,-40341101),e=i(e,f,c,d,a[g+14],17,-1502002290),d=i(d,e,f,c,a[g+15],22,1236535329),c=j(c,d,e,f,a[g+1],5,-165796510),f=j(f,c,d,e,a[g+6],9,-1069501632),e=j(e,f,c,d,a[g+11],14,643717713),d=j(d,e,f,c,a[g+0],20,-373897302),c=j(c,d,e,f,a[g+5],5,-701558691),f=j(f,c,d,e,a[g+10],9,38016083),e=j(e,f,c,d,a[g+15],14,-660478335),d=j(d,e,f,c,a[g+4],20,-405537848),c=j(c,d,e,f,a[g+9],5,568446438),f=j(f,c,d,e,a[g+14],9,-1019803690),e=j(e,f,c,d,a[g+3],14,-187363961),d=j(d,e,f,c,a[g+8],20,1163531501),c=j(c,d,e,f,a[g+13],5,-1444681467),f=j(f,c,d,e,a[g+2],9,-51403784),e=j(e,f,c,d,a[g+7],14,1735328473),d=j(d,e,f,c,a[g+12],20,-1926607734),c=k(c,d,e,f,a[g+5],4,-378558),f=k(f,c,d,e,a[g+8],11,-2022574463),e=k(e,f,c,d,a[g+11],16,1839030562),d=k(d,e,f,c,a[g+14],23,-35309556),c=k(c,d,e,f,a[g+1],4,-1530992060),f=k(f,c,d,e,a[g+4],11,1272893353),e=k(e,f,c,d,a[g+7],16,-155497632),d=k(d,e,f,c,a[g+10],23,-1094730640),c=k(c,d,e,f,a[g+13],4,681279174),f=k(f,c,d,e,a[g+0],11,-358537222),e=k(e,f,c,d,a[g+3],16,-722521979),d=k(d,e,f,c,a[g+6],23,76029189),c=k(c,d,e,f,a[g+9],4,-640364487),f=k(f,c,d,e,a[g+12],11,-421815835),e=k(e,f,c,d,a[g+15],16,530742520),d=k(d,e,f,c,a[g+2],23,-995338651),c=l(c,d,e,f,a[g+0],6,-198630844),f=l(f,c,d,e,a[g+7],10,1126891415),e=l(e,f,c,d,a[g+14],15,-1416354905),d=l(d,e,f,c,a[g+5],21,-57434055),c=l(c,d,e,f,a[g+12],6,1700485571),f=l(f,c,d,e,a[g+3],10,-1894986606),e=l(e,f,c,d,a[g+10],15,-1051523),d=l(d,e,f,c,a[g+1],21,-2054922799),c=l(c,d,e,f,a[g+8],6,1873313359),f=l(f,c,d,e,a[g+15],10,-30611744),e=l(e,f,c,d,a[g+6],15,-1560198380),d=l(d,e,f,c,a[g+13],21,1309151649),c=l(c,d,e,f,a[g+4],6,-145523070),f=l(f,c,d,e,a[g+11],10,-1120210379),e=l(e,f,c,d,a[g+2],15,718787259),d=l(d,e,f,c,a[g+9],21,-343485551),c=m(c,h),d=m(d,n),e=m(e,o),f=m(f,p)}return Array(c,d,e,f)}function h(a,b,c,d,e,f){return m(n(m(m(b,a),m(d,f)),e),c)}function i(a,b,c,d,e,f,g){return h(b&c|~b&d,a,b,e,f,g)}function j(a,b,c,d,e,f,g){return h(b&d|c&~d,a,b,e,f,g)}function k(a,b,c,d,e,f,g){return h(b^c^d,a,b,e,f,g)}function l(a,b,c,d,e,f,g){return h(c^(b|~d),a,b,e,f,g)}function m(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function n(a,b){return a<<b|a>>>32-b}var o=0;return a});angular.module("angularPayments",[]),angular.module("angularPayments").factory("Common",[function(){var a={};return a.parseExpiry=function(a){var b,c,d,e;return a=a||"",a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},a}]),angular.module("angularPayments").factory("Cards",[function(){var a=/(\d{1,4})/g,b=/(?:^|\s)(\d{4})$/,c=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:a,inputFormat:b,length:[12,13,14,15,16,17,18,19],cvcLength:[3],
luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:a,inputFormat:b,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:a,inputFormat:b,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:a,inputFormat:b,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:a,inputFormat:b,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:a,inputFormat:b,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:a,inputFormat:b,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,inputFormat:/^(\d{4}|\d{4}\s\d{6})$/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:a,inputFormat:b,length:[13,14,15,16],cvcLength:[3],luhn:!0}],d=function(a){var b,d,e;for(a=(a+"").replace(/\D/g,""),d=0,e=c.length;e>d;d++)if(b=c[d],b.pattern.test(a))return b},e=function(a){var b,d,e;for(d=0,e=c.length;e>d;d++)if(b=c[d],b.type===a)return b};return{fromNumber:function(a){return d(a)},fromType:function(a){return e(a)},defaultFormat:function(){return a},defaultInputFormat:function(){return b}}}]),angular.module("angularPayments").factory("_Format",["Cards","Common","$filter",function(a,b,c){var d={},e=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document&&null!=(b=document.selection)&&"function"==typeof b.createRange?b.createRange().text:void 0)?!0:!1},f=function(b){var c,d,e,f,g,h,i;if(e=String.fromCharCode(b.which),c=angular.element(b.currentTarget),i=c.val(),d=a.fromNumber(i+e),f=(i.replace(/\D/g,"")+e).length,h=16,d&&(h=d.length[d.length.length-1]),!(f>=h)){if(!/^\d+$/.test(e)&&!b.meta&&b.keyCode>=46)return void b.preventDefault();if(null==c.prop("selectionStart")||c.prop("selectionStart")===i.length)return g=a.defaultInputFormat(),d&&(g=d.inputFormat),g.test(i)?(b.preventDefault(),c.val(i+" "+e)):g.test(i+e)?(b.preventDefault(),c.val(i+e+" ")):void 0}},g=function(b){var c,d,f,g;c=angular.element(b.currentTarget),f=String.fromCharCode(b.which),/^\d+$/.test(f)&&(e(c)||(g=(c.val()+f).replace(/\D/g,""),d=a.fromNumber(g),d?g.length<=d.length[d.length.length-1]||b.preventDefault():g.length<=16||b.preventDefault()))},h=function(a){var b,c;return b=angular.element(a.currentTarget),c=b.val(),a.meta||8!==a.which||null!=b.prop("selectionStart")&&b.prop("selectionStart")!==c.length?void 0:/\d\s$/.test(c)&&!a.meta&&a.keyCode>=46?(a.preventDefault(),b.val(c.replace(/\d\s$/,""))):/\s\d?$/.test(c)?(a.preventDefault(),b.val(c.replace(/\s\d?$/,""))):void 0},i=function(b){var c,d,e,f;return(c=a.fromNumber(b))?(e=c.length[c.length.length-1],b=b.replace(/\D/g,""),b=b.slice(0,+e+1||9e9),c.format.global?null!=(f=b.match(c.format))?f.join(" "):void 0:(d=c.format.exec(b),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):b},j=function(a){return setTimeout(function(){var b,c;return b=angular.element(a.target),c=b.val(),c=i(c),b.val(c)})},k=function(a){return null!=a?a.replace(/\s/g,""):a};d.card=function(a,b){a.bind("keypress",g),a.bind("keypress",f),a.bind("keydown",h),a.bind("paste",j),b.$parsers.push(k),b.$formatters.push(i)},_formatCVC=function(a){return $target=angular.element(a.currentTarget),digit=String.fromCharCode(a.which),!/^\d+$/.test(digit)&&!a.meta&&a.keyCode>=46?void a.preventDefault():(val=$target.val()+digit,val.length<=4?void 0:void a.preventDefault())},d.cvc=function(a){a.bind("keypress",_formatCVC)},_restrictExpiry=function(a){var b,c,d;return b=angular.element(a.currentTarget),c=String.fromCharCode(a.which),!/^\d+$/.test(c)&&!a.meta&&a.keyCode>=46?void a.preventDefault():e(b)?void 0:(d=b.val()+c,d=d.replace(/\D/g,""),d.length>6?void a.preventDefault():void 0)},_formatExpiry=function(a){var b,c,d;return c=String.fromCharCode(a.which),!/^\d+$/.test(c)&&!a.meta&&a.keyCode>=46?void a.preventDefault():(b=angular.element(a.currentTarget),d=b.val()+c,/^\d$/.test(d)&&"0"!==d&&"1"!==d?(a.preventDefault(),b.val("0"+d+" / ")):/^\d\d$/.test(d)?(a.preventDefault(),b.val(""+d+" / ")):void 0)},_formatForwardExpiry=function(a){var b,c,d;return c=String.fromCharCode(a.which),!/^\d+$/.test(c)&&!a.meta&&a.keyCode>=46?void 0:(b=angular.element(a.currentTarget),d=b.val(),/^\d\d$/.test(d)?b.val(""+d+" / "):void 0)},_formatForwardSlash=function(a){var b,c,d;return c=String.fromCharCode(a.which),"/"===c?(b=angular.element(a.currentTarget),d=b.val(),/^\d$/.test(d)&&"0"!==d?b.val("0"+d+" / "):void 0):void 0},_formatBackExpiry=function(a){var b,c;if(!a.meta&&(b=angular.element(a.currentTarget),c=b.val(),8===a.which&&(null==b.prop("selectionStart")||b.prop("selectionStart")===c.length)))return/\d(\s|\/)+$/.test(c)?(a.preventDefault(),b.val(c.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(c)?(a.preventDefault(),b.val(c.replace(/\s\/\s?\d?$/,""))):void 0};var l=function(a){if(null!=a){var d=b.parseExpiry(a),e=new Date(d.year,d.month-1);return c("date")(e,"MM/yyyy")}return null},m=function(a){if(null!=a){var d=b.parseExpiry(a),e=new Date(d.year,d.month-1);return c("date")(e,"MM / yyyy")}return null};return d.expiry=function(a,b){a.bind("keypress",_restrictExpiry),a.bind("keypress",_formatExpiry),a.bind("keypress",_formatForwardSlash),a.bind("keypress",_formatForwardExpiry),a.bind("keydown",_formatBackExpiry),b.$parsers.push(l),b.$formatters.push(m)},function(a,b,c){if(!d[a])throw types=Object.keys(d),errstr='Unknown type for formatting: "'+a+'". ',errstr+='Should be one of: "'+types.join('", "')+'"';return d[a](b,c)}}]).directive("paymentsFormat",["$window","_Format",function(a,b){return{restrict:"A",require:"ngModel",link:function(a,c,d,e){b(d.paymentsFormat,c,e)}}}]),angular.module("angularPayments").factory("_Validate",["Cards","Common","$parse",function(a,b,c){var d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},e=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},f={};return f.cvc=function(b,e,f,g){var h,i;if(null==b||0==b.length)return!0;if(!/^\d+$/.test(b))return!1;var j;if(g.paymentsTypeModel){var k=c(g.paymentsTypeModel);j=k(f)}return j?(h=b.length,d.call(null!=(i=a.fromType(j))?i.cvcLength:void 0,h)>=0):b.length>=3&&b.length<=4},f.card=function(b,f,g,h){var i,j,k;h.paymentsTypeModel&&(k=c(h.paymentsTypeModel));var l=function(){k&&k.assign(g,null),f.$card=null};return null==b||0==b.length?(l(),!0):(b=(b+"").replace(/\s+|-/g,""),/^\d+$/.test(b)&&(i=a.fromNumber(b))?(f.$card=angular.copy(i),k&&k.assign(g,i.type),j=b.length,ret=d.call(i.length,j)>=0&&(i.luhn===!1||e(b)),ret):(l(),!1))},f.expiry=function(a){if(null==a||0==a.length)return!0;obj=b.parseExpiry(a),month=obj.month,year=obj.year;var c,d,e;return month&&year&&/^\d+$/.test(month)&&/^\d+$/.test(year)&&parseInt(month,10)<=12?(2===year.length&&(e=(new Date).getFullYear(),e=e.toString().slice(0,2),year=e+year),d=new Date(year,month),c=new Date,d.setMonth(d.getMonth()-1),d.setMonth(d.getMonth()+1,1),d>c):!1},function(a,b,c,d,e){if(!f[a])throw types=Object.keys(f),errstr='Unknown type for validation: "'+a+'". ',errstr+='Should be one of: "'+types.join('", "')+'"';return f[a](b,c,d,e)}}]).factory("_ValidateWatch",["_Validate",function(a){var b={};return b.cvc=function(b,c,d,e){e.paymentsTypeModel&&d.$watch(e.paymentsTypeModel,function(f,g){if(f!=g){var h=a(b,c.$modelValue,c,d,e);c.$setValidity(b,h)}})},function(a,c,d,e){return b[a]?b[a](a,c,d,e):void 0}}]).directive("paymentsValidate",["$window","_Validate","_ValidateWatch",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,d,e,f){var g=e.paymentsValidate;c(g,f,a,e);var h=function(c){var d=b(g,c,f,a,e);return f.$setValidity(g,d),d?c:void 0};f.$formatters.push(h),f.$parsers.push(h)}}}]),angular.module("angularPayments").directive("stripeForm",["$window","$parse","Common",function(a,b,c){return _getDataToSend=function(a){var b=["number","expMonth","expYear","cvc","name","addressLine1","addressLine2","addressCity","addressState","addressZip","addressCountry"],c=function(a){return a.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})},d={};for(i in b)a.hasOwnProperty(b[i])&&(d[c(b[i])]=angular.copy(a[b[i]]));return d.number=(d.number||"").replace(/ /g,""),d},{restrict:"A",link:function(b,d,e){if(!a.Stripe)throw"stripeForm requires that you have stripe.js installed. Include https://js.stripe.com/v2/ into your html.";var f=angular.element(d);f.bind("submit",function(){expMonthUsed=b.expMonth?!0:!1,expYearUsed=b.expYear?!0:!1,expMonthUsed&&expYearUsed||(exp=c.parseExpiry(b.expiry),b.expMonth=exp.month,b.expYear=exp.year);var d=f.find("button");d.prop("disabled",!0),f.hasClass("ng-valid")?a.Stripe.createToken(_getDataToSend(b),function(){var a=arguments;b.$apply(function(){b[e.stripeForm].apply(b,a)}),d.prop("disabled",!1)}):(b.$apply(function(){b[e.stripeForm].apply(b,[400,{error:"Invalid form submitted."}])}),d.prop("disabled",!1)),b.expMonth=null,b.expYear=null})}}}]);"use strict";angular.module("isteven-multi-select",["ng"]).directive("istevenMultiSelect",["$sce","$timeout","$templateCache",function($sce,$timeout,$templateCache){return{restrict:"AE",scope:{inputModel:"=",outputModel:"=",isDisabled:"=",onClear:"&",onClose:"&",onSearchChange:"&",onItemClick:"&",onOpen:"&",onReset:"&",onSelectAll:"&",onSelectNone:"&",translation:"="},templateUrl:"isteven-multi-select.htm",link:function($scope,element,attrs){$scope.backUp=[];$scope.varButtonLabel="";$scope.spacingProperty="";$scope.indexProperty="";$scope.orientationH=false;$scope.orientationV=true;$scope.filteredModel=[];$scope.inputLabel={labelFilter:""};$scope.tabIndex=0;$scope.lang={};$scope.helperStatus={all:true,none:true,reset:true,filter:true};var prevTabIndex=0,helperItems=[],helperItemsLength=0,checkBoxLayer="",scrolled=false,selectedItems=[],formElements=[],vMinSearchLength=0,clickedItem=null;$scope.clearClicked=function(e){$scope.inputLabel.labelFilter="";$scope.updateFilter();$scope.select("clear",e)};$scope.numberToArray=function(num){return new Array(num)};$scope.searchChanged=function(){if($scope.inputLabel.labelFilter.length<vMinSearchLength&&$scope.inputLabel.labelFilter.length>0){return false}$scope.updateFilter()};$scope.updateFilter=function(){$scope.filteredModel=[];var i=0;if(typeof $scope.inputModel==="undefined"){return false}for(i=$scope.inputModel.length-1;i>=0;i--){if(typeof $scope.inputModel[i][attrs.groupProperty]!=="undefined"&&$scope.inputModel[i][attrs.groupProperty]===false){$scope.filteredModel.push($scope.inputModel[i])}var gotData=false;if(typeof $scope.inputModel[i][attrs.groupProperty]==="undefined"){if(typeof attrs.searchProperty!=="undefined"&&attrs.searchProperty!==""){for(var key in $scope.inputModel[i]){if(typeof $scope.inputModel[i][key]!=="boolean"&&String($scope.inputModel[i][key]).toUpperCase().indexOf($scope.inputLabel.labelFilter.toUpperCase())>=0&&attrs.searchProperty.indexOf(key)>-1){gotData=true;break}}}else{for(var key in $scope.inputModel[i]){if(typeof $scope.inputModel[i][key]!=="boolean"&&String($scope.inputModel[i][key]).toUpperCase().indexOf($scope.inputLabel.labelFilter.toUpperCase())>=0){gotData=true;break}}}if(gotData===true){$scope.filteredModel.push($scope.inputModel[i])}}if(typeof $scope.inputModel[i][attrs.groupProperty]!=="undefined"&&$scope.inputModel[i][attrs.groupProperty]===true){if(typeof $scope.filteredModel[$scope.filteredModel.length-1][attrs.groupProperty]!=="undefined"&&$scope.filteredModel[$scope.filteredModel.length-1][attrs.groupProperty]===false){$scope.filteredModel.pop()}else{$scope.filteredModel.push($scope.inputModel[i])}}}$scope.filteredModel.reverse();$timeout(function(){$scope.getFormElements();if($scope.inputLabel.labelFilter.length>vMinSearchLength){var filterObj=[];angular.forEach($scope.filteredModel,function(value,key){if(typeof value!=="undefined"){if(typeof value[attrs.groupProperty]==="undefined"){var tempObj=angular.copy(value);var index=filterObj.push(tempObj);delete filterObj[index-1][$scope.indexProperty];delete filterObj[index-1][$scope.spacingProperty]}}});$scope.onSearchChange({data:{keyword:$scope.inputLabel.labelFilter,result:filterObj}})}},0)};$scope.getFormElements=function(){formElements=[];var selectButtons=[],inputField=[],checkboxes=[],clearButton=[];if($scope.helperStatus.all||$scope.helperStatus.none||$scope.helperStatus.reset){selectButtons=element.children().children().next().children().children()[0].getElementsByTagName("button");if($scope.helperStatus.filter){inputField=element.children().children().next().children().children().next()[0].getElementsByTagName("input");clearButton=element.children().children().next().children().children().next()[0].getElementsByTagName("button")}}else{if($scope.helperStatus.filter){inputField=element.children().children().next().children().children()[0].getElementsByTagName("input");clearButton=element.children().children().next().children().children()[0].getElementsByTagName("button")}}if(!$scope.helperStatus.all&&!$scope.helperStatus.none&&!$scope.helperStatus.reset&&!$scope.helperStatus.filter){checkboxes=element.children().children().next()[0].getElementsByTagName("input")}else{checkboxes=element.children().children().next().children().next()[0].getElementsByTagName("input")}for(var i=0;i<selectButtons.length;i++){formElements.push(selectButtons[i])}for(var i=0;i<inputField.length;i++){formElements.push(inputField[i])}for(var i=0;i<clearButton.length;i++){formElements.push(clearButton[i])}for(var i=0;i<checkboxes.length;i++){formElements.push(checkboxes[i])}};$scope.isGroupMarker=function(item,type){if(typeof item[attrs.groupProperty]!=="undefined"&&item[attrs.groupProperty]===type)return true;return false};$scope.removeGroupEndMarker=function(item){if(typeof item[attrs.groupProperty]!=="undefined"&&item[attrs.groupProperty]===false)return false;return true};$scope.syncItems=function(item,e,ng_repeat_index){e.preventDefault();e.stopPropagation();if(typeof attrs.disableProperty!=="undefined"&&item[attrs.disableProperty]===true){return false}if(typeof attrs.isDisabled!=="undefined"&&$scope.isDisabled===true){return false}if(typeof item[attrs.groupProperty]!=="undefined"&&item[attrs.groupProperty]===false){return false}var index=$scope.filteredModel.indexOf(item);if(typeof item[attrs.groupProperty]!=="undefined"&&item[attrs.groupProperty]===true){if(typeof attrs.selectionMode!=="undefined"&&attrs.selectionMode.toUpperCase()==="SINGLE"){return false}var i,j,k;var startIndex=0;var endIndex=$scope.filteredModel.length-1;var tempArr=[];var nestLevel=0;for(i=index;i<$scope.filteredModel.length;i++){if(nestLevel===0&&i>index){break}if(typeof $scope.filteredModel[i][attrs.groupProperty]!=="undefined"&&$scope.filteredModel[i][attrs.groupProperty]===true){if(tempArr.length===0){startIndex=i+1}nestLevel=nestLevel+1}else if(typeof $scope.filteredModel[i][attrs.groupProperty]!=="undefined"&&$scope.filteredModel[i][attrs.groupProperty]===false){nestLevel=nestLevel-1;if(tempArr.length>0&&nestLevel===0){var allTicked=true;endIndex=i;for(j=0;j<tempArr.length;j++){if(typeof tempArr[j][$scope.tickProperty]!=="undefined"&&tempArr[j][$scope.tickProperty]===false){allTicked=false;break}}if(allTicked===true){for(j=startIndex;j<=endIndex;j++){if(typeof $scope.filteredModel[j][attrs.groupProperty]==="undefined"){if(typeof attrs.disableProperty==="undefined"){$scope.filteredModel[j][$scope.tickProperty]=false;inputModelIndex=$scope.filteredModel[j][$scope.indexProperty];$scope.inputModel[inputModelIndex][$scope.tickProperty]=false}else if($scope.filteredModel[j][attrs.disableProperty]!==true){$scope.filteredModel[j][$scope.tickProperty]=false;inputModelIndex=$scope.filteredModel[j][$scope.indexProperty];$scope.inputModel[inputModelIndex][$scope.tickProperty]=false}}}}else{for(j=startIndex;j<=endIndex;j++){if(typeof $scope.filteredModel[j][attrs.groupProperty]==="undefined"){if(typeof attrs.disableProperty==="undefined"){$scope.filteredModel[j][$scope.tickProperty]=true;inputModelIndex=$scope.filteredModel[j][$scope.indexProperty];$scope.inputModel[inputModelIndex][$scope.tickProperty]=true}else if($scope.filteredModel[j][attrs.disableProperty]!==true){$scope.filteredModel[j][$scope.tickProperty]=true;inputModelIndex=$scope.filteredModel[j][$scope.indexProperty];$scope.inputModel[inputModelIndex][$scope.tickProperty]=true}}}}}}else{tempArr.push($scope.filteredModel[i])}}}else{if(typeof attrs.selectionMode!=="undefined"&&attrs.selectionMode.toUpperCase()==="SINGLE"){for(i=0;i<$scope.filteredModel.length;i++){$scope.filteredModel[i][$scope.tickProperty]=false}for(i=0;i<$scope.inputModel.length;i++){$scope.inputModel[i][$scope.tickProperty]=false}$scope.filteredModel[index][$scope.tickProperty]=true}else{$scope.filteredModel[index][$scope.tickProperty]=!$scope.filteredModel[index][$scope.tickProperty]}var inputModelIndex=$scope.filteredModel[index][$scope.indexProperty];$scope.inputModel[inputModelIndex][$scope.tickProperty]=$scope.filteredModel[index][$scope.tickProperty]}clickedItem=angular.copy(item);if(clickedItem!==null){$timeout(function(){delete clickedItem[$scope.indexProperty];delete clickedItem[$scope.spacingProperty];$scope.onItemClick({data:clickedItem});clickedItem=null},0)}$scope.refreshOutputModel();$scope.refreshButton();prevTabIndex=$scope.tabIndex;$scope.tabIndex=ng_repeat_index+helperItemsLength;e.target.focus();$scope.removeFocusStyle(prevTabIndex);$scope.setFocusStyle($scope.tabIndex);if(typeof attrs.selectionMode!=="undefined"&&attrs.selectionMode.toUpperCase()==="SINGLE"){$scope.toggleCheckboxes(e)}};$scope.refreshOutputModel=function(){$scope.outputModel=[];var outputProps=[],tempObj={};if(typeof attrs.outputProperties!=="undefined"){outputProps=attrs.outputProperties.split(" ");angular.forEach($scope.inputModel,function(value,key){if(typeof value!=="undefined"&&typeof value[attrs.groupProperty]==="undefined"&&value[$scope.tickProperty]===true){tempObj={};angular.forEach(value,function(value1,key1){if(outputProps.indexOf(key1)>-1){tempObj[key1]=value1}});var index=$scope.outputModel.push(tempObj);delete $scope.outputModel[index-1][$scope.indexProperty];delete $scope.outputModel[index-1][$scope.spacingProperty]}})}else{angular.forEach($scope.inputModel,function(value,key){if(typeof value!=="undefined"&&typeof value[attrs.groupProperty]==="undefined"&&value[$scope.tickProperty]===true){var temp=angular.copy(value);var index=$scope.outputModel.push(temp);delete $scope.outputModel[index-1][$scope.indexProperty];delete $scope.outputModel[index-1][$scope.spacingProperty]}})}};$scope.refreshButton=function(){$scope.varButtonLabel="";var ctr=0;if($scope.outputModel.length===0){$scope.varButtonLabel=$scope.lang.nothingSelected}else{var tempMaxLabels=$scope.outputModel.length;if(typeof attrs.maxLabels!=="undefined"&&attrs.maxLabels!==""){tempMaxLabels=attrs.maxLabels}if($scope.outputModel.length>tempMaxLabels){$scope.more=true}else{$scope.more=false}angular.forEach($scope.inputModel,function(value,key){if(typeof value!=="undefined"&&value[attrs.tickProperty]===true){if(ctr<tempMaxLabels){$scope.varButtonLabel+=($scope.varButtonLabel.length>0?'</div>, <div class="buttonLabel">':'<div class="buttonLabel">')+$scope.writeLabel(value,"buttonLabel")}ctr++}});if($scope.more===true){if(tempMaxLabels>0){$scope.varButtonLabel+=", ... "}$scope.varButtonLabel+="("+$scope.outputModel.length+")"}}$scope.varButtonLabel=$sce.trustAsHtml($scope.varButtonLabel+'<span class="caret"></span>')};$scope.itemIsDisabled=function(item){if(typeof attrs.disableProperty!=="undefined"&&item[attrs.disableProperty]===true){return true}else{if($scope.isDisabled===true){return true}else{return false}}};$scope.writeLabel=function(item,type){var temp=attrs[type].split(" ");var label="";angular.forEach(temp,function(value,key){item[value]&&(label+="&nbsp;"+value.split(".").reduce(function(prev,current){return prev[current]},item))});if(type.toUpperCase()==="BUTTONLABEL"){return label}return $sce.trustAsHtml(label)};$scope.toggleCheckboxes=function(e){var clickedEl=element.children()[0];angular.element(document).off("click",$scope.externalClickListener);angular.element(document).off("keydown",$scope.keyboardListener);if(angular.element(checkBoxLayer).hasClass("show")){angular.element(checkBoxLayer).removeClass("show");angular.element(clickedEl).removeClass("buttonClicked");angular.element(document).off("click",$scope.externalClickListener);angular.element(document).off("keydown",$scope.keyboardListener);$scope.removeFocusStyle($scope.tabIndex);if(typeof formElements[$scope.tabIndex]!=="undefined"){formElements[$scope.tabIndex].blur()}$timeout(function(){$scope.onClose()},0);element.children().children()[0].focus()}else{$scope.inputLabel.labelFilter="";$scope.updateFilter();helperItems=[];helperItemsLength=0;angular.element(checkBoxLayer).addClass("show");angular.element(clickedEl).addClass("buttonClicked");angular.element(document).on("click",$scope.externalClickListener);angular.element(document).on("keydown",$scope.keyboardListener);$scope.getFormElements();$scope.tabIndex=0;var helperContainer=angular.element(element[0].querySelector(".helperContainer"))[0];if(typeof helperContainer!=="undefined"){for(var i=0;i<helperContainer.getElementsByTagName("BUTTON").length;i++){helperItems[i]=helperContainer.getElementsByTagName("BUTTON")[i]}helperItemsLength=helperItems.length+helperContainer.getElementsByTagName("INPUT").length}if(element[0].querySelector(".inputFilter")){element[0].querySelector(".inputFilter").focus();$scope.tabIndex=$scope.tabIndex+helperItemsLength-2;angular.element(element).children()[0].blur()}else{if(!$scope.isDisabled){$scope.tabIndex=$scope.tabIndex+helperItemsLength;if($scope.inputModel.length>0){formElements[$scope.tabIndex].focus();$scope.setFocusStyle($scope.tabIndex);angular.element(element).children()[0].blur()}}}$scope.onOpen()}};$scope.externalClickListener=function(e){var targetsArr=element.find(e.target.tagName);for(var i=0;i<targetsArr.length;i++){if(e.target==targetsArr[i]){return}}angular.element(checkBoxLayer.previousSibling).removeClass("buttonClicked");angular.element(checkBoxLayer).removeClass("show");angular.element(document).off("click",$scope.externalClickListener);angular.element(document).off("keydown",$scope.keyboardListener);$timeout(function(){$scope.onClose()},0);element.children().children()[0].focus()};$scope.select=function(type,e){var helperIndex=helperItems.indexOf(e.target);$scope.tabIndex=helperIndex;switch(type.toUpperCase()){case"ALL":angular.forEach($scope.filteredModel,function(value,key){if(typeof value!=="undefined"&&value[attrs.disableProperty]!==true){if(typeof value[attrs.groupProperty]==="undefined"){value[$scope.tickProperty]=true}}});$scope.refreshOutputModel();$scope.refreshButton();$scope.onSelectAll();break;case"NONE":angular.forEach($scope.filteredModel,function(value,key){if(typeof value!=="undefined"&&value[attrs.disableProperty]!==true){if(typeof value[attrs.groupProperty]==="undefined"){value[$scope.tickProperty]=false}}});$scope.refreshOutputModel();$scope.refreshButton();$scope.onSelectNone();break;case"RESET":angular.forEach($scope.filteredModel,function(value,key){if(typeof value[attrs.groupProperty]==="undefined"&&typeof value!=="undefined"&&value[attrs.disableProperty]!==true){var temp=value[$scope.indexProperty];value[$scope.tickProperty]=$scope.backUp[temp][$scope.tickProperty]}});$scope.refreshOutputModel();$scope.refreshButton();$scope.onReset();break;case"CLEAR":$scope.tabIndex=$scope.tabIndex+1;$scope.onClear();break;case"FILTER":$scope.tabIndex=helperItems.length-1;break;default:}};function genRandomString(length){var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var temp="";for(var i=0;i<length;i++){temp+=possible.charAt(Math.floor(Math.random()*possible.length))}return temp}$scope.prepareGrouping=function(){var spacing=0;angular.forEach($scope.filteredModel,function(value,key){value[$scope.spacingProperty]=spacing;if(value[attrs.groupProperty]===true){spacing+=2}else if(value[attrs.groupProperty]===false){spacing-=2}})};$scope.prepareIndex=function(){var ctr=0;angular.forEach($scope.filteredModel,function(value,key){value[$scope.indexProperty]=ctr;ctr++})};$scope.keyboardListener=function(e){var key=e.keyCode?e.keyCode:e.which;var isNavigationKey=false;if(key===27){e.preventDefault();e.stopPropagation();$scope.toggleCheckboxes(e)}else if(key===40||key===39||!e.shiftKey&&key==9){isNavigationKey=true;prevTabIndex=$scope.tabIndex;$scope.tabIndex++;if($scope.tabIndex>formElements.length-1){$scope.tabIndex=0;prevTabIndex=formElements.length-1}while(formElements[$scope.tabIndex].disabled===true){$scope.tabIndex++;if($scope.tabIndex>formElements.length-1){$scope.tabIndex=0}if($scope.tabIndex===prevTabIndex){break}}}else if(key===38||key===37||e.shiftKey&&key==9){isNavigationKey=true;prevTabIndex=$scope.tabIndex;$scope.tabIndex--;if($scope.tabIndex<0){$scope.tabIndex=formElements.length-1;prevTabIndex=0}while(formElements[$scope.tabIndex].disabled===true){$scope.tabIndex--;if($scope.tabIndex===prevTabIndex){break}if($scope.tabIndex<0){$scope.tabIndex=formElements.length-1}}}if(isNavigationKey===true){e.preventDefault();formElements[$scope.tabIndex].focus();var actEl=document.activeElement;if(actEl.type.toUpperCase()==="CHECKBOX"){$scope.setFocusStyle($scope.tabIndex);$scope.removeFocusStyle(prevTabIndex)}else{$scope.removeFocusStyle(prevTabIndex);$scope.removeFocusStyle(helperItemsLength);$scope.removeFocusStyle(formElements.length-1)}}isNavigationKey=false};$scope.setFocusStyle=function(tabIndex){angular.element(formElements[tabIndex]).parent().parent().parent().addClass("multiSelectFocus")};$scope.removeFocusStyle=function(tabIndex){angular.element(formElements[tabIndex]).parent().parent().parent().removeClass("multiSelectFocus")};$scope.groupProperty=attrs.groupProperty;$scope.tickProperty=attrs.tickProperty;$scope.directiveId=attrs.directiveId;var tempStr=genRandomString(5);$scope.indexProperty="idx_"+tempStr;$scope.spacingProperty="spc_"+tempStr;if(typeof attrs.orientation!=="undefined"){if(attrs.orientation.toUpperCase()==="HORIZONTAL"){$scope.orientationH=true;$scope.orientationV=false}else{$scope.orientationH=false;$scope.orientationV=true}}checkBoxLayer=element.children().children().next()[0];if(typeof attrs.maxHeight!=="undefined"){var layer=element.children().children().children()[0];angular.element(layer).attr("style","height:"+attrs.maxHeight+"; overflow-y:scroll;")}for(var property in $scope.helperStatus){if($scope.helperStatus.hasOwnProperty(property)){if(typeof attrs.helperElements!=="undefined"&&attrs.helperElements.toUpperCase().indexOf(property.toUpperCase())===-1){$scope.helperStatus[property]=false}}}if(typeof attrs.selectionMode!=="undefined"&&attrs.selectionMode.toUpperCase()==="SINGLE"){$scope.helperStatus["all"]=false;$scope.helperStatus["none"]=false}$scope.icon={};$scope.icon.selectAll="&#10003;";$scope.icon.selectNone="&times;";$scope.icon.reset="&#8630;";$scope.icon.tickMark="&#10003;";if(typeof attrs.translation!=="undefined"){$scope.lang.selectAll=$sce.trustAsHtml($scope.icon.selectAll+"&nbsp;&nbsp;"+$scope.translation.selectAll);$scope.lang.selectNone=$sce.trustAsHtml($scope.icon.selectNone+"&nbsp;&nbsp;"+$scope.translation.selectNone);$scope.lang.reset=$sce.trustAsHtml($scope.icon.reset+"&nbsp;&nbsp;"+$scope.translation.reset);$scope.lang.search=$scope.translation.search;$scope.lang.nothingSelected=$sce.trustAsHtml($scope.translation.nothingSelected)}else{$scope.lang.selectAll=$sce.trustAsHtml($scope.icon.selectAll+"&nbsp;&nbsp;Select All");$scope.lang.selectNone=$sce.trustAsHtml($scope.icon.selectNone+"&nbsp;&nbsp;Select None");$scope.lang.reset=$sce.trustAsHtml($scope.icon.reset+"&nbsp;&nbsp;Reset");$scope.lang.search="Search...";$scope.lang.nothingSelected="None Selected"}$scope.icon.tickMark=$sce.trustAsHtml($scope.icon.tickMark);if(typeof attrs.MinSearchLength!=="undefined"&&parseInt(attrs.MinSearchLength)>0){vMinSearchLength=Math.floor(parseInt(attrs.MinSearchLength))}$scope.$watch("inputModel",function(newVal){if(newVal){$scope.refreshOutputModel();$scope.refreshButton()}},true);$scope.$watch("inputModel",function(newVal){if(newVal){$scope.backUp=angular.copy($scope.inputModel);$scope.updateFilter();$scope.prepareGrouping();$scope.prepareIndex();$scope.refreshOutputModel();$scope.refreshButton()}});$scope.$watch("isDisabled",function(newVal){$scope.isDisabled=newVal});var onTouchStart=function(e){$scope.$apply(function(){$scope.scrolled=false})};angular.element(document).bind("touchstart",onTouchStart);var onTouchMove=function(e){$scope.$apply(function(){$scope.scrolled=true})};angular.element(document).bind("touchmove",onTouchMove);$scope.$on("$destroy",function(){angular.element(document).unbind("touchstart",onTouchStart);angular.element(document).unbind("touchmove",onTouchMove)})}}}]).run(["$templateCache",function($templateCache){var template='<span class="multiSelect inlineBlock">'+'<button id="{{directiveId}}" type="button"'+'ng-click="toggleCheckboxes( $event ); refreshSelectedItems(); refreshButton(); prepareGrouping; prepareIndex();"'+'ng-bind-html="varButtonLabel"'+'ng-disabled="disable-button"'+">"+"</button>"+'<div class="checkboxLayer">'+'<div class="helperContainer" ng-if="helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset ">'+'<div class="line" ng-if="helperStatus.all || helperStatus.none || helperStatus.reset ">'+'<button type="button" class="helperButton"'+'ng-disabled="isDisabled"'+'ng-if="helperStatus.all"'+"ng-click=\"select( 'all', $event );\""+'ng-bind-html="lang.selectAll">'+"</button>"+'<button type="button" class="helperButton"'+'ng-disabled="isDisabled"'+'ng-if="helperStatus.none"'+"ng-click=\"select( 'none', $event );\""+'ng-bind-html="lang.selectNone">'+"</button>"+'<button type="button" class="helperButton reset"'+'ng-disabled="isDisabled"'+'ng-if="helperStatus.reset"'+"ng-click=\"select( 'reset', $event );\""+'ng-bind-html="lang.reset">'+"</button>"+"</div>"+'<div class="line" style="position:relative" ng-if="helperStatus.filter">'+'<input placeholder="{{lang.search}}" type="text"'+"ng-click=\"select( 'filter', $event )\" "+'ng-model="inputLabel.labelFilter" '+'ng-change="searchChanged()" class="inputFilter"'+"/>"+'<button type="button" class="clearButton" ng-click="clearClicked( $event )" >×</button> '+"</div> "+"</div> "+'<div class="checkBoxContainer">'+"<div "+'ng-repeat="item in filteredModel | filter:removeGroupEndMarker" class="multiSelectItem"'+'ng-class="{selected: item[ tickProperty ], horizontal: orientationH, vertical: orientationV, multiSelectGroup:item[ groupProperty ], disabled:itemIsDisabled( item )}"'+'ng-click="syncItems( item, $event, $index );" '+'ng-mouseleave="removeFocusStyle( tabIndex );"> '+'<div class="acol" ng-if="item[ spacingProperty ] > 0" ng-repeat="i in numberToArray( item[ spacingProperty ] ) track by $index">'+"</div>  "+'<div class="acol">'+"<label>"+'<input class="checkbox focusable" type="checkbox" '+'ng-disabled="itemIsDisabled( item )" '+'ng-checked="item[ tickProperty ]" '+'ng-click="syncItems( item, $event, $index )" />'+"<span "+'ng-class="{disabled:itemIsDisabled( item )}" '+"ng-bind-html=\"writeLabel( item, 'itemLabel' )\">"+"</span>"+"</label>"+"</div>"+'<span class="tickMark" ng-if="item[ groupProperty ] !== true && item[ tickProperty ] === true" ng-bind-html="icon.tickMark"></span>'+"</div>"+"</div>"+"</div>"+"</span>";$templateCache.put("isteven-multi-select.htm",template)}]);(function(root){root.Parse=root.Parse||{};root.Parse.VERSION="js1.3.0"})(this);(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;
var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.4.4";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?null:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value||_.identity);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++})};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){each(input,function(value){if(_.isArray(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(concat.apply(ArrayProto,arguments))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(args,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,l+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};_.bind=function(func,context){if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return func.apply(context,args.concat(slice.call(arguments)))}};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait){var context,args,timeout,result;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(n);for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;if(typeof exports!=="undefined"&&exports._){Parse._=exports._.noConflict();Parse.localStorage=require("localStorage");Parse.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;exports.Parse=Parse}else{Parse._=_.noConflict();if(typeof localStorage!=="undefined"){Parse.localStorage=localStorage}if(typeof XMLHttpRequest!=="undefined"){Parse.XMLHttpRequest=XMLHttpRequest}}if(typeof $!=="undefined"){Parse.$=$}var EmptyConstructor=function(){};var inherits=function(parent,protoProps,staticProps){var child;if(protoProps&&protoProps.hasOwnProperty("constructor")){child=protoProps.constructor}else{child=function(){parent.apply(this,arguments)}}Parse._.extend(child,parent);EmptyConstructor.prototype=parent.prototype;child.prototype=new EmptyConstructor;if(protoProps){Parse._.extend(child.prototype,protoProps)}if(staticProps){Parse._.extend(child,staticProps)}child.prototype.constructor=child;child.__super__=parent.prototype;return child};Parse.serverURL="https://api.parse.com";if(typeof process!=="undefined"&&process.versions&&process.versions.node){Parse._isNode=true}Parse.initialize=function(applicationId,javaScriptKey,masterKey){if(masterKey){throw"Parse.initialize() was passed a Master Key, which is only "+"allowed from within Node.js."}Parse._initialize(applicationId,javaScriptKey)};Parse._initialize=function(applicationId,javaScriptKey,masterKey){Parse.applicationId=applicationId;Parse.javaScriptKey=javaScriptKey;Parse.masterKey=masterKey;Parse._useMasterKey=false};if(Parse._isNode){Parse.initialize=Parse._initialize;Parse.Cloud=Parse.Cloud||{};Parse.Cloud.useMasterKey=function(){Parse._useMasterKey=true}}Parse._getParsePath=function(path){if(!Parse.applicationId){throw"You need to call Parse.initialize before using Parse."}if(!path){path=""}if(!Parse._.isString(path)){throw"Tried to get a localStorage path that wasn't a String."}if(path[0]==="/"){path=path.substring(1)}return"Parse/"+Parse.applicationId+"/"+path};Parse._installationId=null;Parse._getInstallationId=function(){if(Parse._installationId){return Parse._installationId}var path=Parse._getParsePath("installationId");Parse._installationId=Parse.localStorage.getItem(path);if(!Parse._installationId||Parse._installationId===""){var hexOctet=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};Parse._installationId=hexOctet()+hexOctet()+"-"+hexOctet()+"-"+hexOctet()+"-"+hexOctet()+"-"+hexOctet()+hexOctet()+hexOctet();Parse.localStorage.setItem(path,Parse._installationId)}return Parse._installationId};Parse._parseDate=function(iso8601){var regexp=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})"+"T"+"([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})"+"(.([0-9]+))?"+"Z$");var match=regexp.exec(iso8601);if(!match){return null}var year=match[1]||0;var month=(match[2]||1)-1;var day=match[3]||0;var hour=match[4]||0;var minute=match[5]||0;var second=match[6]||0;var milli=match[8]||0;return new Date(Date.UTC(year,month,day,hour,minute,second,milli))};Parse._ajaxIE8=function(method,url,data){var promise=new Parse.Promise;var xdr=new XDomainRequest;xdr.onload=function(){var response;try{response=JSON.parse(xdr.responseText)}catch(e){promise.reject(e)}if(response){promise.resolve(response)}};xdr.onerror=xdr.ontimeout=function(){var fakeResponse={responseText:JSON.stringify({code:Parse.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};promise.reject(fakeResponse)};xdr.onprogress=function(){};xdr.open(method,url);xdr.send(data);return promise};Parse._useXDomainRequest=function(){if(typeof XDomainRequest!=="undefined"){if("withCredentials"in new XMLHttpRequest){return false}return true}return false};Parse._ajax=function(method,url,data,success,error){var options={success:success,error:error};if(Parse._useXDomainRequest()){return Parse._ajaxIE8(method,url,data)._thenRunCallbacks(options)}var promise=new Parse.Promise;var handled=false;var xhr=new Parse.XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState===4){if(handled){return}handled=true;if(xhr.status>=200&&xhr.status<300){var response;try{response=JSON.parse(xhr.responseText)}catch(e){promise.reject(e)}if(response){promise.resolve(response,xhr.status,xhr)}}else{promise.reject(xhr)}}};xhr.open(method,url,true);xhr.setRequestHeader("Content-Type","text/plain");if(Parse._isNode){xhr.setRequestHeader("User-Agent","Parse/"+Parse.VERSION+" (NodeJS "+process.versions.node+")")}xhr.send(data);return promise._thenRunCallbacks(options)};Parse._extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);child.extend=this.extend;return child};Parse._request=function(options){var route=options.route;var className=options.className;var objectId=options.objectId;var method=options.method;var useMasterKey=options.useMasterKey;var sessionToken=options.sessionToken;var dataObject=options.data;if(!Parse.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!Parse.javaScriptKey&&!Parse.masterKey){throw"You must specify a key using Parse.initialize."}if(!sessionToken){var currentUser=Parse.User.current();if(currentUser&&currentUser._sessionToken){sessionToken=currentUser._sessionToken}}if(route!=="batch"&&route!=="classes"&&route!=="events"&&route!=="files"&&route!=="functions"&&route!=="login"&&route!=="push"&&route!=="requestPasswordReset"&&route!=="rest_verify_analytics"&&route!=="users"&&route!=="jobs"&&route!=="config"){throw"Bad route: '"+route+"'."}var url=Parse.serverURL;if(url.charAt(url.length-1)!=="/"){url+="/"}url+="1/"+route;if(className){url+="/"+className}if(objectId){url+="/"+objectId}dataObject=Parse._.clone(dataObject||{});if(method!=="POST"){dataObject._method=method;method="POST"}if(Parse._.isUndefined(useMasterKey)){useMasterKey=Parse._useMasterKey}dataObject._ApplicationId=Parse.applicationId;if(!useMasterKey){dataObject._JavaScriptKey=Parse.javaScriptKey}else{dataObject._MasterKey=Parse.masterKey}dataObject._ClientVersion=Parse.VERSION;dataObject._InstallationId=Parse._getInstallationId();if(sessionToken){dataObject._SessionToken=sessionToken}var data=JSON.stringify(dataObject);return Parse._ajax(method,url,data).then(null,function(response){var error;if(response&&response.responseText){try{var errorJSON=JSON.parse(response.responseText);error=new Parse.Error(errorJSON.code,errorJSON.error)}catch(e){error=new Parse.Error(Parse.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+response.responseText)}}else{error=new Parse.Error(Parse.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(response))}return Parse.Promise.error(error)})};Parse._getValue=function(object,prop){if(!(object&&object[prop])){return null}return Parse._.isFunction(object[prop])?object[prop]():object[prop]};Parse._encode=function(value,seenObjects,disallowObjects){var _=Parse._;if(value instanceof Parse.Object){if(disallowObjects){throw"Parse.Objects not allowed here"}if(!seenObjects||_.include(seenObjects,value)||!value._hasData){return value._toPointer()}if(!value.dirty()){seenObjects=seenObjects.concat(value);return Parse._encode(value._toFullJSON(seenObjects),seenObjects,disallowObjects)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(value instanceof Parse.ACL){return value.toJSON()}if(_.isDate(value)){return{__type:"Date",iso:value.toJSON()}}if(value instanceof Parse.GeoPoint){return value.toJSON()}if(_.isArray(value)){return _.map(value,function(x){return Parse._encode(x,seenObjects,disallowObjects)})}if(_.isRegExp(value)){return value.source}if(value instanceof Parse.Relation){return value.toJSON()}if(value instanceof Parse.Op){return value.toJSON()}if(value instanceof Parse.File){if(!value.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:value.name(),url:value.url()}}if(_.isObject(value)){var output={};Parse._objectEach(value,function(v,k){output[k]=Parse._encode(v,seenObjects,disallowObjects)});return output}return value};Parse._decode=function(key,value){var _=Parse._;if(!_.isObject(value)){return value}if(_.isArray(value)){Parse._arrayEach(value,function(v,k){value[k]=Parse._decode(k,v)});return value}if(value instanceof Parse.Object){return value}if(value instanceof Parse.File){return value}if(value instanceof Parse.Op){return value}if(value.__op){return Parse.Op._decode(value)}if(value.__type==="Pointer"&&value.className){var pointer=Parse.Object._create(value.className);pointer._finishFetch({objectId:value.objectId},false);return pointer}if(value.__type==="Object"&&value.className){var className=value.className;delete value.__type;delete value.className;var object=Parse.Object._create(className);object._finishFetch(value,true);return object}if(value.__type==="Date"){return Parse._parseDate(value.iso)}if(value.__type==="GeoPoint"){return new Parse.GeoPoint({latitude:value.latitude,longitude:value.longitude})}if(key==="ACL"){if(value instanceof Parse.ACL){return value}return new Parse.ACL(value)}if(value.__type==="Relation"){var relation=new Parse.Relation(null,key);relation.targetClassName=value.className;return relation}if(value.__type==="File"){var file=new Parse.File(value.name);file._url=value.url;return file}Parse._objectEach(value,function(v,k){value[k]=Parse._decode(k,v)});return value};Parse._arrayEach=Parse._.each;Parse._traverse=function(object,func,seen){if(object instanceof Parse.Object){seen=seen||[];if(Parse._.indexOf(seen,object)>=0){return}seen.push(object);Parse._traverse(object.attributes,func,seen);return func(object)}if(object instanceof Parse.Relation||object instanceof Parse.File){return func(object)}if(Parse._.isArray(object)){Parse._.each(object,function(child,index){var newChild=Parse._traverse(child,func,seen);if(newChild){object[index]=newChild}});return func(object)}if(Parse._.isObject(object)){Parse._each(object,function(child,key){var newChild=Parse._traverse(child,func,seen);if(newChild){object[key]=newChild}});return func(object)}return func(object)};Parse._objectEach=Parse._each=function(obj,callback){var _=Parse._;if(_.isObject(obj)){_.each(_.keys(obj),function(key){callback(obj[key],key)})}else{_.each(obj,callback)}};Parse._isNullOrUndefined=function(x){return Parse._.isNull(x)||Parse._.isUndefined(x)}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Analytics=Parse.Analytics||{};_.extend(Parse.Analytics,{track:function(name,dimensions){name=name||"";name=name.replace(/^\s*/,"");name=name.replace(/\s*$/,"");if(name.length===0){throw"A name for the custom event must be provided"}_.each(dimensions,function(val,key){if(!_.isString(key)||!_.isString(val)){throw'track() dimensions expects keys and values of type "string".'}});return Parse._request({route:"events",className:name,method:"POST",data:{dimensions:dimensions}})}})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Config=function(){this.attributes={};this._escapedAttributes={}};Parse.Config.current=function(){if(Parse.Config._currentConfig){return Parse.Config._currentConfig}var configData=Parse.localStorage.getItem(Parse._getParsePath(Parse.Config._CURRENT_CONFIG_KEY));var config=new Parse.Config;if(configData){config._finishFetch(JSON.parse(configData));Parse.Config._currentConfig=config}return config};Parse.Config.get=function(options){options=options||{};var request=Parse._request({route:"config",method:"GET"});return request.then(function(response){if(!response||!response.params){var errorObject=new Parse.Error(Parse.Error.INVALID_JSON,"Config JSON response invalid.");return Parse.Promise.error(errorObject)}var config=new Parse.Config;config._finishFetch(response);Parse.Config._currentConfig=config;return config})._thenRunCallbacks(options)};Parse.Config.prototype={escape:function(attr){var html=this._escapedAttributes[attr];if(html){return html}var val=this.attributes[attr];var escaped;if(Parse._isNullOrUndefined(val)){escaped=""}else{escaped=_.escape(val.toString())}this._escapedAttributes[attr]=escaped;return escaped},get:function(attr){return this.attributes[attr]},_finishFetch:function(serverData){this.attributes=Parse._decode(null,_.clone(serverData.params));Parse.localStorage.setItem(Parse._getParsePath(Parse.Config._CURRENT_CONFIG_KEY),JSON.stringify(serverData))}};Parse.Config._currentConfig=null;Parse.Config._CURRENT_CONFIG_KEY="currentConfig"})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Error=function(code,message){this.code=code;this.message=message};_.extend(Parse.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,
INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})})(this);(function(){var root=this;var Parse=root.Parse||(root.Parse={});var eventSplitter=/\s+/;var slice=Array.prototype.slice;Parse.Events={on:function(events,callback,context){var calls,event,node,tail,list;if(!callback){return this}events=events.split(eventSplitter);calls=this._callbacks||(this._callbacks={});event=events.shift();while(event){list=calls[event];node=list?list.tail:{};node.next=tail={};node.context=context;node.callback=callback;calls[event]={tail:tail,next:list?list.next:node};event=events.shift()}return this},off:function(events,callback,context){var event,calls,node,tail,cb,ctx;if(!(calls=this._callbacks)){return}if(!(events||callback||context)){delete this._callbacks;return this}events=events?events.split(eventSplitter):_.keys(calls);event=events.shift();while(event){node=calls[event];delete calls[event];if(!node||!(callback||context)){continue}tail=node.tail;node=node.next;while(node!==tail){cb=node.callback;ctx=node.context;if(callback&&cb!==callback||context&&ctx!==context){this.on(event,cb,ctx)}node=node.next}event=events.shift()}return this},trigger:function(events){var event,node,calls,tail,args,all,rest;if(!(calls=this._callbacks)){return this}all=calls.all;events=events.split(eventSplitter);rest=slice.call(arguments,1);event=events.shift();while(event){node=calls[event];if(node){tail=node.tail;while((node=node.next)!==tail){node.callback.apply(node.context||this,rest)}}node=all;if(node){tail=node.tail;args=[event].concat(rest);while((node=node.next)!==tail){node.callback.apply(node.context||this,args)}}event=events.shift()}return this}};Parse.Events.bind=Parse.Events.on;Parse.Events.unbind=Parse.Events.off}).call(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.GeoPoint=function(arg1,arg2){if(_.isArray(arg1)){Parse.GeoPoint._validate(arg1[0],arg1[1]);this.latitude=arg1[0];this.longitude=arg1[1]}else if(_.isObject(arg1)){Parse.GeoPoint._validate(arg1.latitude,arg1.longitude);this.latitude=arg1.latitude;this.longitude=arg1.longitude}else if(_.isNumber(arg1)&&_.isNumber(arg2)){Parse.GeoPoint._validate(arg1,arg2);this.latitude=arg1;this.longitude=arg2}else{this.latitude=0;this.longitude=0}var self=this;if(this.__defineGetter__&&this.__defineSetter__){this._latitude=this.latitude;this._longitude=this.longitude;this.__defineGetter__("latitude",function(){return self._latitude});this.__defineGetter__("longitude",function(){return self._longitude});this.__defineSetter__("latitude",function(val){Parse.GeoPoint._validate(val,self.longitude);self._latitude=val});this.__defineSetter__("longitude",function(val){Parse.GeoPoint._validate(self.latitude,val);self._longitude=val})}};Parse.GeoPoint._validate=function(latitude,longitude){if(latitude<-90){throw"Parse.GeoPoint latitude "+latitude+" < -90.0."}if(latitude>90){throw"Parse.GeoPoint latitude "+latitude+" > 90.0."}if(longitude<-180){throw"Parse.GeoPoint longitude "+longitude+" < -180.0."}if(longitude>180){throw"Parse.GeoPoint longitude "+longitude+" > 180.0."}};Parse.GeoPoint.current=function(options){var promise=new Parse.Promise;navigator.geolocation.getCurrentPosition(function(location){promise.resolve(new Parse.GeoPoint({latitude:location.coords.latitude,longitude:location.coords.longitude}))},function(error){promise.reject(error)});return promise._thenRunCallbacks(options)};Parse.GeoPoint.prototype={toJSON:function(){Parse.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(point){var d2r=Math.PI/180;var lat1rad=this.latitude*d2r;var long1rad=this.longitude*d2r;var lat2rad=point.latitude*d2r;var long2rad=point.longitude*d2r;var deltaLat=lat1rad-lat2rad;var deltaLong=long1rad-long2rad;var sinDeltaLatDiv2=Math.sin(deltaLat/2);var sinDeltaLongDiv2=Math.sin(deltaLong/2);var a=sinDeltaLatDiv2*sinDeltaLatDiv2+Math.cos(lat1rad)*Math.cos(lat2rad)*sinDeltaLongDiv2*sinDeltaLongDiv2;a=Math.min(1,a);return 2*Math.asin(Math.sqrt(a))},kilometersTo:function(point){return this.radiansTo(point)*6371},milesTo:function(point){return this.radiansTo(point)*3958.8}}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;var PUBLIC_KEY="*";Parse.ACL=function(arg1){var self=this;self.permissionsById={};if(_.isObject(arg1)){if(arg1 instanceof Parse.User){self.setReadAccess(arg1,true);self.setWriteAccess(arg1,true)}else{if(_.isFunction(arg1)){throw"Parse.ACL() called with a function.  Did you forget ()?"}Parse._objectEach(arg1,function(accessList,userId){if(!_.isString(userId)){throw"Tried to create an ACL with an invalid userId."}self.permissionsById[userId]={};Parse._objectEach(accessList,function(allowed,permission){if(permission!=="read"&&permission!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!_.isBoolean(allowed)){throw"Tried to create an ACL with an invalid permission value."}self.permissionsById[userId][permission]=allowed})})}}};Parse.ACL.prototype.toJSON=function(){return _.clone(this.permissionsById)};Parse.ACL.prototype._setAccess=function(accessType,userId,allowed){if(userId instanceof Parse.User){userId=userId.id}else if(userId instanceof Parse.Role){userId="role:"+userId.getName()}if(!_.isString(userId)){throw"userId must be a string."}if(!_.isBoolean(allowed)){throw"allowed must be either true or false."}var permissions=this.permissionsById[userId];if(!permissions){if(!allowed){return}else{permissions={};this.permissionsById[userId]=permissions}}if(allowed){this.permissionsById[userId][accessType]=true}else{delete permissions[accessType];if(_.isEmpty(permissions)){delete permissions[userId]}}};Parse.ACL.prototype._getAccess=function(accessType,userId){if(userId instanceof Parse.User){userId=userId.id}else if(userId instanceof Parse.Role){userId="role:"+userId.getName()}var permissions=this.permissionsById[userId];if(!permissions){return false}return permissions[accessType]?true:false};Parse.ACL.prototype.setReadAccess=function(userId,allowed){this._setAccess("read",userId,allowed)};Parse.ACL.prototype.getReadAccess=function(userId){return this._getAccess("read",userId)};Parse.ACL.prototype.setWriteAccess=function(userId,allowed){this._setAccess("write",userId,allowed)};Parse.ACL.prototype.getWriteAccess=function(userId){return this._getAccess("write",userId)};Parse.ACL.prototype.setPublicReadAccess=function(allowed){this.setReadAccess(PUBLIC_KEY,allowed)};Parse.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(PUBLIC_KEY)};Parse.ACL.prototype.setPublicWriteAccess=function(allowed){this.setWriteAccess(PUBLIC_KEY,allowed)};Parse.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(PUBLIC_KEY)};Parse.ACL.prototype.getRoleReadAccess=function(role){if(role instanceof Parse.Role){role=role.getName()}if(_.isString(role)){return this.getReadAccess("role:"+role)}throw"role must be a Parse.Role or a String"};Parse.ACL.prototype.getRoleWriteAccess=function(role){if(role instanceof Parse.Role){role=role.getName()}if(_.isString(role)){return this.getWriteAccess("role:"+role)}throw"role must be a Parse.Role or a String"};Parse.ACL.prototype.setRoleReadAccess=function(role,allowed){if(role instanceof Parse.Role){role=role.getName()}if(_.isString(role)){this.setReadAccess("role:"+role,allowed);return}throw"role must be a Parse.Role or a String"};Parse.ACL.prototype.setRoleWriteAccess=function(role,allowed){if(role instanceof Parse.Role){role=role.getName()}if(_.isString(role)){this.setWriteAccess("role:"+role,allowed);return}throw"role must be a Parse.Role or a String"}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Op=function(){this._initialize.apply(this,arguments)};Parse.Op.prototype={_initialize:function(){}};_.extend(Parse.Op,{_extend:Parse._extend,_opDecoderMap:{},_registerDecoder:function(opName,decoder){Parse.Op._opDecoderMap[opName]=decoder},_decode:function(json){var decoder=Parse.Op._opDecoderMap[json.__op];if(decoder){return decoder(json)}else{return undefined}}});Parse.Op._registerDecoder("Batch",function(json){var op=null;Parse._arrayEach(json.ops,function(nextOp){nextOp=Parse.Op._decode(nextOp);op=nextOp._mergeWithPrevious(op)});return op});Parse.Op.Set=Parse.Op._extend({_initialize:function(value){this._value=value},value:function(){return this._value},toJSON:function(){return Parse._encode(this.value())},_mergeWithPrevious:function(previous){return this},_estimate:function(oldValue){return this.value()}});Parse.Op._UNSET={};Parse.Op.Unset=Parse.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(previous){return this},_estimate:function(oldValue){return Parse.Op._UNSET}});Parse.Op._registerDecoder("Delete",function(json){return new Parse.Op.Unset});Parse.Op.Increment=Parse.Op._extend({_initialize:function(amount){this._amount=amount},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(previous){if(!previous){return this}else if(previous instanceof Parse.Op.Unset){return new Parse.Op.Set(this.amount())}else if(previous instanceof Parse.Op.Set){return new Parse.Op.Set(previous.value()+this.amount())}else if(previous instanceof Parse.Op.Increment){return new Parse.Op.Increment(this.amount()+previous.amount())}else{throw"Op is invalid after previous op."}},_estimate:function(oldValue){if(!oldValue){return this.amount()}return oldValue+this.amount()}});Parse.Op._registerDecoder("Increment",function(json){return new Parse.Op.Increment(json.amount)});Parse.Op.Add=Parse.Op._extend({_initialize:function(objects){this._objects=objects},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:Parse._encode(this.objects())}},_mergeWithPrevious:function(previous){if(!previous){return this}else if(previous instanceof Parse.Op.Unset){return new Parse.Op.Set(this.objects())}else if(previous instanceof Parse.Op.Set){return new Parse.Op.Set(this._estimate(previous.value()))}else if(previous instanceof Parse.Op.Add){return new Parse.Op.Add(previous.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}},_estimate:function(oldValue){if(!oldValue){return _.clone(this.objects())}else{return oldValue.concat(this.objects())}}});Parse.Op._registerDecoder("Add",function(json){return new Parse.Op.Add(Parse._decode(undefined,json.objects))});Parse.Op.AddUnique=Parse.Op._extend({_initialize:function(objects){this._objects=_.uniq(objects)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:Parse._encode(this.objects())}},_mergeWithPrevious:function(previous){if(!previous){return this}else if(previous instanceof Parse.Op.Unset){return new Parse.Op.Set(this.objects())}else if(previous instanceof Parse.Op.Set){return new Parse.Op.Set(this._estimate(previous.value()))}else if(previous instanceof Parse.Op.AddUnique){return new Parse.Op.AddUnique(this._estimate(previous.objects()))}else{throw"Op is invalid after previous op."}},_estimate:function(oldValue){if(!oldValue){return _.clone(this.objects())}else{var newValue=_.clone(oldValue);Parse._arrayEach(this.objects(),function(obj){if(obj instanceof Parse.Object&&obj.id){var matchingObj=_.find(newValue,function(anObj){return anObj instanceof Parse.Object&&anObj.id===obj.id});if(!matchingObj){newValue.push(obj)}else{var index=_.indexOf(newValue,matchingObj);newValue[index]=obj}}else if(!_.contains(newValue,obj)){newValue.push(obj)}});return newValue}}});Parse.Op._registerDecoder("AddUnique",function(json){return new Parse.Op.AddUnique(Parse._decode(undefined,json.objects))});Parse.Op.Remove=Parse.Op._extend({_initialize:function(objects){this._objects=_.uniq(objects)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:Parse._encode(this.objects())}},_mergeWithPrevious:function(previous){if(!previous){return this}else if(previous instanceof Parse.Op.Unset){return previous}else if(previous instanceof Parse.Op.Set){return new Parse.Op.Set(this._estimate(previous.value()))}else if(previous instanceof Parse.Op.Remove){return new Parse.Op.Remove(_.union(previous.objects(),this.objects()))}else{throw"Op is invalid after previous op."}},_estimate:function(oldValue){if(!oldValue){return[]}else{var newValue=_.difference(oldValue,this.objects());Parse._arrayEach(this.objects(),function(obj){if(obj instanceof Parse.Object&&obj.id){newValue=_.reject(newValue,function(other){return other instanceof Parse.Object&&other.id===obj.id})}});return newValue}}});Parse.Op._registerDecoder("Remove",function(json){return new Parse.Op.Remove(Parse._decode(undefined,json.objects))});Parse.Op.Relation=Parse.Op._extend({_initialize:function(adds,removes){this._targetClassName=null;var self=this;var pointerToId=function(object){if(object instanceof Parse.Object){if(!object.id){throw"You can't add an unsaved Parse.Object to a relation."}if(!self._targetClassName){self._targetClassName=object.className}if(self._targetClassName!==object.className){throw"Tried to create a Parse.Relation with 2 different types: "+self._targetClassName+" and "+object.className+"."}return object.id}return object};this.relationsToAdd=_.uniq(_.map(adds,pointerToId));this.relationsToRemove=_.uniq(_.map(removes,pointerToId))},added:function(){var self=this;return _.map(this.relationsToAdd,function(objectId){var object=Parse.Object._create(self._targetClassName);object.id=objectId;return object})},removed:function(){var self=this;return _.map(this.relationsToRemove,function(objectId){var object=Parse.Object._create(self._targetClassName);object.id=objectId;return object})},toJSON:function(){var adds=null;var removes=null;var self=this;var idToPointer=function(id){return{__type:"Pointer",className:self._targetClassName,objectId:id}};var pointers=null;if(this.relationsToAdd.length>0){pointers=_.map(this.relationsToAdd,idToPointer);adds={__op:"AddRelation",objects:pointers}}if(this.relationsToRemove.length>0){pointers=_.map(this.relationsToRemove,idToPointer);removes={__op:"RemoveRelation",objects:pointers}}if(adds&&removes){return{__op:"Batch",ops:[adds,removes]}}return adds||removes||{}},_mergeWithPrevious:function(previous){if(!previous){return this}else if(previous instanceof Parse.Op.Unset){throw"You can't modify a relation after deleting it."}else if(previous instanceof Parse.Op.Relation){if(previous._targetClassName&&previous._targetClassName!==this._targetClassName){throw"Related object must be of class "+previous._targetClassName+", but "+this._targetClassName+" was passed in."}var newAdd=_.union(_.difference(previous.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var newRemove=_.union(_.difference(previous.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var newRelation=new Parse.Op.Relation(newAdd,newRemove);newRelation._targetClassName=this._targetClassName;return newRelation}else{throw"Op is invalid after previous op."}},_estimate:function(oldValue,object,key){if(!oldValue){var relation=new Parse.Relation(object,key);relation.targetClassName=this._targetClassName}else if(oldValue instanceof Parse.Relation){if(this._targetClassName){if(oldValue.targetClassName){if(oldValue.targetClassName!==this._targetClassName){throw"Related object must be a "+oldValue.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{oldValue.targetClassName=this._targetClassName}}return oldValue}else{throw"Op is invalid after previous op."}}});Parse.Op._registerDecoder("AddRelation",function(json){return new Parse.Op.Relation(Parse._decode(undefined,json.objects),[])});Parse.Op._registerDecoder("RemoveRelation",function(json){return new Parse.Op.Relation([],Parse._decode(undefined,json.objects))})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Relation=function(parent,key){this.parent=parent;this.key=key;this.targetClassName=null};Parse.Relation.prototype={_ensureParentAndKey:function(parent,key){this.parent=this.parent||parent;this.key=this.key||key;if(this.parent!==parent){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==key){throw"Internal Error. Relation retrieved from two different keys."}},add:function(objects){if(!_.isArray(objects)){objects=[objects]}var change=new Parse.Op.Relation(objects,[]);this.parent.set(this.key,change);this.targetClassName=change._targetClassName},remove:function(objects){if(!_.isArray(objects)){objects=[objects]}var change=new Parse.Op.Relation([],objects);this.parent.set(this.key,change);this.targetClassName=change._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var targetClass;var query;if(!this.targetClassName){targetClass=Parse.Object._getSubclass(this.parent.className);query=new Parse.Query(targetClass);query._extraOptions.redirectClassNameForKey=this.key}else{targetClass=Parse.Object._getSubclass(this.targetClassName);query=new Parse.Query(targetClass)}query._addCondition("$relatedTo","object",this.parent._toPointer());query._addCondition("$relatedTo","key",this.key);return query}}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};_.extend(Parse.Promise,{_isPromisesAPlusCompliant:false,is:function(promise){return promise&&promise.then&&_.isFunction(promise.then)},as:function(){var promise=new Parse.Promise;promise.resolve.apply(promise,arguments);return promise},error:function(){var promise=new Parse.Promise;promise.reject.apply(promise,arguments);return promise},when:function(promises){var objects;if(promises&&Parse._isNullOrUndefined(promises.length)){objects=arguments}else{objects=promises}var total=objects.length;var hadError=false;var results=[];var errors=[];results.length=objects.length;errors.length=objects.length;if(total===0){return Parse.Promise.as.apply(this,results)}var promise=new Parse.Promise;var resolveOne=function(){total=total-1;if(total===0){if(hadError){promise.reject(errors)}else{promise.resolve.apply(promise,results)}}};Parse._arrayEach(objects,function(object,i){if(Parse.Promise.is(object)){object.then(function(result){results[i]=result;resolveOne()},function(error){errors[i]=error;hadError=true;resolveOne()})}else{results[i]=object;resolveOne()}});return promise},_continueWhile:function(predicate,asyncFunction){if(predicate()){return asyncFunction().then(function(){return Parse.Promise._continueWhile(predicate,asyncFunction)})}return Parse.Promise.as()}});_.extend(Parse.Promise.prototype,{resolve:function(result){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var results=arguments;Parse._arrayEach(this._resolvedCallbacks,function(resolvedCallback){resolvedCallback.apply(this,results)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(error){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=error;Parse._arrayEach(this._rejectedCallbacks,function(rejectedCallback){rejectedCallback(error)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(resolvedCallback,rejectedCallback){var promise=new Parse.Promise;var wrappedResolvedCallback=function(){var result=arguments;if(resolvedCallback){if(Parse.Promise._isPromisesAPlusCompliant){try{result=[resolvedCallback.apply(this,result)]}catch(e){result=[Parse.Promise.error(e)]}}else{result=[resolvedCallback.apply(this,result)]}}if(result.length===1&&Parse.Promise.is(result[0])){result[0].then(function(){promise.resolve.apply(promise,arguments)},function(error){promise.reject(error)})}else{promise.resolve.apply(promise,result)}};var wrappedRejectedCallback=function(error){var result=[];if(rejectedCallback){if(Parse.Promise._isPromisesAPlusCompliant){try{result=[rejectedCallback(error)]}catch(e){result=[Parse.Promise.error(e)]}}else{result=[rejectedCallback(error)]}if(result.length===1&&Parse.Promise.is(result[0])){result[0].then(function(){promise.resolve.apply(promise,arguments)},function(error){promise.reject(error)})}else{if(Parse.Promise._isPromisesAPlusCompliant){promise.resolve.apply(promise,result)}else{promise.reject(result[0])}}}else{promise.reject(error)}};var runLater=function(func){func.call()};if(Parse.Promise._isPromisesAPlusCompliant){if(typeof window!=="undefined"&&window.setTimeout){runLater=function(func){window.setTimeout(func,0)}}else if(typeof process!=="undefined"&&process.nextTick){runLater=function(func){process.nextTick(func)}}}var self=this;if(this._resolved){runLater(function(){wrappedResolvedCallback.apply(self,self._result)})}else if(this._rejected){runLater(function(){wrappedRejectedCallback(self._error)})}else{this._resolvedCallbacks.push(wrappedResolvedCallback);this._rejectedCallbacks.push(wrappedRejectedCallback)}return promise},always:function(callback){return this.then(callback,callback)},done:function(callback){return this.then(callback)},fail:function(callback){return this.then(null,callback)},_thenRunCallbacks:function(optionsOrCallback,model){var options;if(_.isFunction(optionsOrCallback)){var callback=optionsOrCallback;options={success:function(result){callback(result,null)},error:function(error){callback(null,error)}}}else{options=_.clone(optionsOrCallback)}options=options||{};return this.then(function(result){if(options.success){options.success.apply(this,arguments)}else if(model){model.trigger("sync",model,result,options)}return Parse.Promise.as.apply(Parse.Promise,arguments)},function(error){if(options.error){if(!_.isUndefined(model)){options.error(model,error)}else{options.error(error)}}else if(model){model.trigger("error",model,error,options)}return Parse.Promise.error(error)})},_continueWith:function(continuation){return this.then(function(){return continuation(arguments,null)},function(error){return continuation(null,error)})}})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;var b64Digit=function(number){if(number<26){return String.fromCharCode(65+number)}if(number<52){return String.fromCharCode(97+(number-26))}if(number<62){return String.fromCharCode(48+(number-52))}if(number===62){return"+"}if(number===63){return"/"}throw"Tried to encode large digit "+number+" in base64."};var encodeBase64=function(array){var chunks=[];chunks.length=Math.ceil(array.length/3);_.times(chunks.length,function(i){var b1=array[i*3];var b2=array[i*3+1]||0;var b3=array[i*3+2]||0;var has2=i*3+1<array.length;var has3=i*3+2<array.length;chunks[i]=[b64Digit(b1>>2&63),b64Digit(b1<<4&48|b2>>4&15),has2?b64Digit(b2<<2&60|b3>>6&3):"=",has3?b64Digit(b3&63):"="].join("")});return chunks.join("")};var mimeTypes={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml."+"document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml."+"template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml."+"presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml."+"template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml."+"slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml."+"template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var readAsync=function(file,type){var promise=new Parse.Promise;if(typeof FileReader==="undefined"){return Parse.Promise.error(new Parse.Error(Parse.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser."))}var reader=new FileReader;reader.onloadend=function(){if(reader.readyState!==2){promise.reject(new Parse.Error(Parse.Error.FILE_READ_ERROR,"Error reading file."));return}var dataURL=reader.result;var matches=/^data:([^;]*);base64,(.*)$/.exec(dataURL);if(!matches){promise.reject(new Parse.Error(Parse.ERROR.FILE_READ_ERROR,"Unable to interpret data URL: "+dataURL));return}promise.resolve(matches[2],type||matches[1])};reader.readAsDataURL(file);return promise};Parse.File=function(name,data,type){this._name=name;var extension=/\.([^.]*)$/.exec(name);if(extension){extension=extension[1].toLowerCase()}var guessedType=type||mimeTypes[extension]||"text/plain";if(_.isArray(data)){this._source=Parse.Promise.as(encodeBase64(data),guessedType)}else if(data&&data.base64){var dataUriRegexp=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/;var matches=dataUriRegexp.exec(data.base64);if(matches&&matches.length>0){this._source=Parse.Promise.as(matches.length===4?matches[3]:matches[2],matches[1])}else{this._source=Parse.Promise.as(data.base64,guessedType)}}else if(typeof File!=="undefined"&&data instanceof File){this._source=readAsync(data,type)}else if(_.isString(data)){throw"Creating a Parse.File from a String is not yet supported."}};Parse.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(options){options=options||{};var self=this;if(!self._previousSave){self._previousSave=self._source.then(function(base64,type){var data={base64:base64,_ContentType:type};return Parse._request({route:"files",className:self._name,method:"POST",data:data,useMasterKey:options.useMasterKey})}).then(function(response){self._name=response.name;self._url=response.url;return self})}return self._previousSave._thenRunCallbacks(options)}}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Object=function(attributes,options){if(_.isString(attributes)){return Parse.Object._create.apply(this,arguments)}attributes=attributes||{};if(options&&options.parse){attributes=this.parse(attributes)}var defaults=Parse._getValue(this,"defaults");if(defaults){attributes=_.extend({},defaults,attributes)}if(options&&options.collection){this.collection=options.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=_.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(attributes,{silent:true})){throw new Error("Can't create an invalid Parse.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=_.clone(this.attributes);this.initialize.apply(this,arguments);
};Parse.Object.saveAll=function(list,options){options=options||{};return Parse.Object._deepSaveAsync(list,{useMasterKey:options.useMasterKey})._thenRunCallbacks(options)};Parse.Object.destroyAll=function(list,options){options=options||{};var triggerDestroy=function(object){object.trigger("destroy",object,object.collection,options)};var errors=[];var destroyBatch=function(batch){var promise=Parse.Promise.as();if(batch.length>0){promise=promise.then(function(){return Parse._request({route:"batch",method:"POST",useMasterKey:options.useMasterKey,data:{requests:_.map(batch,function(object){return{method:"DELETE",path:"/1/classes/"+object.className+"/"+object.id}})}})}).then(function(responses,status,xhr){Parse._arrayEach(batch,function(object,i){if(responses[i].success&&options.wait){triggerDestroy(object)}else if(responses[i].error){var error=new Parse.Error(responses[i].error.code,responses[i].error.error);error.object=object;errors.push(error)}})})}return promise};var promise=Parse.Promise.as();var batch=[];Parse._arrayEach(list,function(object,i){if(!object.id||!options.wait){triggerDestroy(object)}if(object.id){batch.push(object)}if(batch.length===20||i+1===list.length){var thisBatch=batch;batch=[];promise=promise.then(function(){return destroyBatch(thisBatch)})}});return promise.then(function(){if(errors.length===0){return true}else{var error=new Parse.Error(Parse.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");error.errors=errors;return Parse.Promise.error(error)}})._thenRunCallbacks(options)};Parse.Object.fetchAll=function(list,options){return Parse.Object._fetchAll(list,true)._thenRunCallbacks(options)};Parse.Object.fetchAllIfNeeded=function(list,options){return Parse.Object._fetchAll(list,false)._thenRunCallbacks(options)};_.extend(Parse.Object.prototype,Parse.Events,{_existed:false,initialize:function(){},toJSON:function(){var json=this._toFullJSON();Parse._arrayEach(["__type","className"],function(key){delete json[key]});return json},_toFullJSON:function(seenObjects){var json=_.clone(this.attributes);Parse._objectEach(json,function(val,key){json[key]=Parse._encode(val,seenObjects)});Parse._objectEach(this._operations,function(val,key){json[key]=val});if(_.has(this,"id")){json.objectId=this.id}if(_.has(this,"createdAt")){if(_.isDate(this.createdAt)){json.createdAt=this.createdAt.toJSON()}else{json.createdAt=this.createdAt}}if(_.has(this,"updatedAt")){if(_.isDate(this.updatedAt)){json.updatedAt=this.updatedAt.toJSON()}else{json.updatedAt=this.updatedAt}}json.__type="Object";json.className=this.className;return json},_refreshCache:function(){var self=this;if(self._refreshingCache){return}self._refreshingCache=true;Parse._objectEach(this.attributes,function(value,key){if(value instanceof Parse.Object){value._refreshCache()}else if(_.isObject(value)){if(self._resetCacheForKey(key)){self.set(key,new Parse.Op.Set(value),{silent:true})}}});delete self._refreshingCache},dirty:function(attr){this._refreshCache();var currentChanges=_.last(this._opSetQueue);if(attr){return currentChanges[attr]?true:false}if(!this.id){return true}if(_.keys(currentChanges).length>0){return true}return false},dirtyKeys:function(){return _.keys(_.last(this._opSetQueue))},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(attr){return this.attributes[attr]},relation:function(attr){var value=this.get(attr);if(value){if(!(value instanceof Parse.Relation)){throw"Called relation() on non-relation field "+attr}value._ensureParentAndKey(this,attr);return value}else{return new Parse.Relation(this,attr)}},escape:function(attr){var html=this._escapedAttributes[attr];if(html){return html}var val=this.attributes[attr];var escaped;if(Parse._isNullOrUndefined(val)){escaped=""}else{escaped=_.escape(val.toString())}this._escapedAttributes[attr]=escaped;return escaped},has:function(attr){return!Parse._isNullOrUndefined(this.attributes[attr])},_mergeMagicFields:function(attrs){var model=this;var specialFields=["id","objectId","createdAt","updatedAt"];Parse._arrayEach(specialFields,function(attr){if(attrs[attr]){if(attr==="objectId"){model.id=attrs[attr]}else if((attr==="createdAt"||attr==="updatedAt")&&!_.isDate(attrs[attr])){model[attr]=Parse._parseDate(attrs[attr])}else{model[attr]=attrs[attr]}delete attrs[attr]}})},_copyServerData:function(serverData){var tempServerData={};Parse._objectEach(serverData,function(value,key){tempServerData[key]=Parse._decode(key,value)});this._serverData=tempServerData;this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._rebuildAllEstimatedData()},_mergeFromObject:function(other){if(!other){return}this.id=other.id;this.createdAt=other.createdAt;this.updatedAt=other.updatedAt;this._copyServerData(other._serverData);this._hasData=true},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var self=this;var failedChanges=_.first(this._opSetQueue);this._opSetQueue=_.rest(this._opSetQueue);var nextChanges=_.first(this._opSetQueue);Parse._objectEach(failedChanges,function(op,key){var op1=failedChanges[key];var op2=nextChanges[key];if(op1&&op2){nextChanges[key]=op2._mergeWithPrevious(op1)}else if(op1){nextChanges[key]=op1}});this._saving=this._saving-1},_finishSave:function(serverData){var fetchedObjects={};Parse._traverse(this.attributes,function(object){if(object instanceof Parse.Object&&object.id&&object._hasData){fetchedObjects[object.id]=object}});var savedChanges=_.first(this._opSetQueue);this._opSetQueue=_.rest(this._opSetQueue);this._applyOpSet(savedChanges,this._serverData);this._mergeMagicFields(serverData);var self=this;Parse._objectEach(serverData,function(value,key){self._serverData[key]=Parse._decode(key,value);var fetched=Parse._traverse(self._serverData[key],function(object){if(object instanceof Parse.Object&&fetchedObjects[object.id]){return fetchedObjects[object.id]}});if(fetched){self._serverData[key]=fetched}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(serverData,hasData){this._opSetQueue=[{}];this._mergeMagicFields(serverData);this._copyServerData(serverData);this._hasData=hasData},_applyOpSet:function(opSet,target){var self=this;Parse._objectEach(opSet,function(change,key){target[key]=change._estimate(target[key],self,key);if(target[key]===Parse.Op._UNSET){delete target[key]}})},_resetCacheForKey:function(key){var value=this.attributes[key];if(_.isObject(value)&&!(value instanceof Parse.Object)&&!(value instanceof Parse.File)){value=value.toJSON?value.toJSON():value;var json=JSON.stringify(value);if(this._hashedJSON[key]!==json){var wasSet=!!this._hashedJSON[key];this._hashedJSON[key]=json;return wasSet}}return false},_rebuildEstimatedDataForKey:function(key){var self=this;delete this.attributes[key];if(this._serverData[key]){this.attributes[key]=this._serverData[key]}Parse._arrayEach(this._opSetQueue,function(opSet){var op=opSet[key];if(op){self.attributes[key]=op._estimate(self.attributes[key],self,key);if(self.attributes[key]===Parse.Op._UNSET){delete self.attributes[key]}else{self._resetCacheForKey(key)}}})},_rebuildAllEstimatedData:function(){var self=this;var previousAttributes=_.clone(this.attributes);this.attributes=_.clone(this._serverData);Parse._arrayEach(this._opSetQueue,function(opSet){self._applyOpSet(opSet,self.attributes);Parse._objectEach(opSet,function(op,key){self._resetCacheForKey(key)})});Parse._objectEach(previousAttributes,function(oldValue,key){if(self.attributes[key]!==oldValue){self.trigger("change:"+key,self,self.attributes[key],{})}});Parse._objectEach(this.attributes,function(newValue,key){if(!_.has(previousAttributes,key)){self.trigger("change:"+key,self,newValue,{})}})},set:function(key,value,options){var attrs,attr;if(_.isObject(key)||Parse._isNullOrUndefined(key)){attrs=key;Parse._objectEach(attrs,function(v,k){attrs[k]=Parse._decode(k,v)});options=value}else{attrs={};attrs[key]=Parse._decode(key,value)}options=options||{};if(!attrs){return this}if(attrs instanceof Parse.Object){attrs=attrs.attributes}if(options.unset){Parse._objectEach(attrs,function(unused_value,key){attrs[key]=new Parse.Op.Unset})}var dataToValidate=_.clone(attrs);var self=this;Parse._objectEach(dataToValidate,function(value,key){if(value instanceof Parse.Op){dataToValidate[key]=value._estimate(self.attributes[key],self,key);if(dataToValidate[key]===Parse.Op._UNSET){delete dataToValidate[key]}}});if(!this._validate(attrs,options)){return false}this._mergeMagicFields(attrs);options.changes={};var escaped=this._escapedAttributes;var prev=this._previousAttributes||{};Parse._arrayEach(_.keys(attrs),function(attr){var val=attrs[attr];if(val instanceof Parse.Relation){val.parent=self}if(!(val instanceof Parse.Op)){val=new Parse.Op.Set(val)}var isRealChange=true;if(val instanceof Parse.Op.Set&&_.isEqual(self.attributes[attr],val.value)){isRealChange=false}if(isRealChange){delete escaped[attr];if(options.silent){self._silent[attr]=true}else{options.changes[attr]=true}}var currentChanges=_.last(self._opSetQueue);currentChanges[attr]=val._mergeWithPrevious(currentChanges[attr]);self._rebuildEstimatedDataForKey(attr);if(isRealChange){self.changed[attr]=self.attributes[attr];if(!options.silent){self._pending[attr]=true}}else{delete self.changed[attr];delete self._pending[attr]}});if(!options.silent){this.change(options)}return this},unset:function(attr,options){options=options||{};options.unset=true;return this.set(attr,null,options)},increment:function(attr,amount){if(_.isUndefined(amount)||_.isNull(amount)){amount=1}return this.set(attr,new Parse.Op.Increment(amount))},add:function(attr,item){return this.set(attr,new Parse.Op.Add([item]))},addUnique:function(attr,item){return this.set(attr,new Parse.Op.AddUnique([item]))},remove:function(attr,item){return this.set(attr,new Parse.Op.Remove([item]))},op:function(attr){return _.last(this._opSetQueue)[attr]},clear:function(options){options=options||{};options.unset=true;var keysToClear=_.extend(this.attributes,this._operations);return this.set(keysToClear,options)},_getSaveJSON:function(){var json=_.clone(_.first(this._opSetQueue));Parse._objectEach(json,function(op,key){json[key]=op.toJSON()});return json},_canBeSerialized:function(){return Parse.Object._canBeSerializedAsValue(this.attributes)},fetch:function(options){var self=this;options=options||{};var request=Parse._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:options.useMasterKey});return request.then(function(response,status,xhr){self._finishFetch(self.parse(response,status,xhr),true);return self})._thenRunCallbacks(options,this)},save:function(arg1,arg2,arg3){var i,attrs,current,options,saved;if(_.isObject(arg1)||Parse._isNullOrUndefined(arg1)){attrs=arg1;options=arg2}else{attrs={};attrs[arg1]=arg2;options=arg3}if(!options&&attrs){var extra_keys=_.reject(attrs,function(value,key){return _.include(["success","error","wait"],key)});if(extra_keys.length===0){var all_functions=true;if(_.has(attrs,"success")&&!_.isFunction(attrs.success)){all_functions=false}if(_.has(attrs,"error")&&!_.isFunction(attrs.error)){all_functions=false}if(all_functions){return this.save(null,attrs)}}}options=_.clone(options)||{};if(options.wait){current=_.clone(this.attributes)}var setOptions=_.clone(options)||{};if(setOptions.wait){setOptions.silent=true}var setError;setOptions.error=function(model,error){setError=error};if(attrs&&!this.set(attrs,setOptions)){return Parse.Promise.error(setError)._thenRunCallbacks(options,this)}var model=this;model._refreshCache();var unsavedChildren=[];var unsavedFiles=[];Parse.Object._findUnsavedChildren(model.attributes,unsavedChildren,unsavedFiles);if(unsavedChildren.length+unsavedFiles.length>0){return Parse.Object._deepSaveAsync(this.attributes,{useMasterKey:options.useMasterKey}).then(function(){return model.save(null,options)},function(error){return Parse.Promise.error(error)._thenRunCallbacks(options,model)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||Parse.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var method=model.id?"PUT":"POST";var json=model._getSaveJSON();var route="classes";var className=model.className;if(model.className==="_User"&&!model.id){route="users";className=null}var request=Parse._request({route:route,className:className,objectId:model.id,method:method,useMasterKey:options.useMasterKey,data:json});request=request.then(function(resp,status,xhr){var serverAttrs=model.parse(resp,status,xhr);if(options.wait){serverAttrs=_.extend(attrs||{},serverAttrs)}model._finishSave(serverAttrs);if(options.wait){model.set(current,setOptions)}return model},function(error){model._cancelSave();return Parse.Promise.error(error)})._thenRunCallbacks(options,model);return request});return this._allPreviousSaves},destroy:function(options){options=options||{};var model=this;var triggerDestroy=function(){model.trigger("destroy",model,model.collection,options)};if(!this.id){return triggerDestroy()}if(!options.wait){triggerDestroy()}var request=Parse._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:options.useMasterKey});return request.then(function(){if(options.wait){triggerDestroy()}return model})._thenRunCallbacks(options,this)},parse:function(resp,status,xhr){var output=_.clone(resp);_(["createdAt","updatedAt"]).each(function(key){if(output[key]){output[key]=Parse._parseDate(output[key])}});if(!output.updatedAt){output.updatedAt=output.createdAt}if(status){this._existed=status!==201}return output},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(options){options=options||{};var changing=this._changing;this._changing=true;var self=this;Parse._objectEach(this._silent,function(attr){self._pending[attr]=true});var changes=_.extend({},options.changes,this._silent);this._silent={};Parse._objectEach(changes,function(unused_value,attr){self.trigger("change:"+attr,self,self.get(attr),options)});if(changing){return this}var deleteChanged=function(value,attr){if(!self._pending[attr]&&!self._silent[attr]){delete self.changed[attr]}};while(!_.isEmpty(this._pending)){this._pending={};this.trigger("change",this,options);Parse._objectEach(this.changed,deleteChanged);self._previousAttributes=_.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},hasChanged:function(attr){if(!arguments.length){return!_.isEmpty(this.changed)}return this.changed&&_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff){return this.hasChanged()?_.clone(this.changed):false}var changed={};var old=this._previousAttributes;Parse._objectEach(diff,function(diffVal,attr){if(!_.isEqual(old[attr],diffVal)){changed[attr]=diffVal}});return changed},previous:function(attr){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(attrs,options){if(_.has(attrs,"ACL")&&!(attrs.ACL instanceof Parse.ACL)){return new Parse.Error(Parse.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}var correct=true;Parse._objectEach(attrs,function(unused_value,key){if(!/^[A-Za-z][0-9A-Za-z_]*$/.test(key)){correct=false}});if(!correct){return new Parse.Error(Parse.Error.INVALID_KEY_NAME)}return false},_validate:function(attrs,options){if(options.silent||!this.validate){return true}attrs=_.extend({},this.attributes,attrs);var error=this.validate(attrs,options);if(!error){return true}if(options&&options.error){options.error(this,error,options)}else{this.trigger("error",this,error,options)}return false},getACL:function(){return this.get("ACL")},setACL:function(acl,options){return this.set("ACL",acl,options)}});Parse.Object._getSubclass=function(className){if(!_.isString(className)){throw"Parse.Object._getSubclass requires a string argument."}var ObjectClass=Parse.Object._classMap[className];if(!ObjectClass){ObjectClass=Parse.Object.extend(className);Parse.Object._classMap[className]=ObjectClass}return ObjectClass};Parse.Object._create=function(className,attributes,options){var ObjectClass=Parse.Object._getSubclass(className);return new ObjectClass(attributes,options)};Parse.Object._toObjectIdArray=function(list,omitObjectsWithData){if(list.length===0){return Parse.Promise.as(list)}var error;var className=list[0].className;var objectIds=[];for(var i=0;i<list.length;i++){var object=list[i];if(className!==object.className){error=new Parse.Error(Parse.Error.INVALID_CLASS_NAME,"All objects should be of the same class");return Parse.Promise.error(error)}else if(!object.id){error=new Parse.Error(Parse.Error.MISSING_OBJECT_ID,"All objects must have an ID");return Parse.Promise.error(error)}else if(omitObjectsWithData&&object._hasData){continue}objectIds.push(object.id)}return Parse.Promise.as(objectIds)};Parse.Object._updateWithFetchedResults=function(list,fetched,forceFetch){var fetchedObjectsById={};Parse._arrayEach(fetched,function(object,i){fetchedObjectsById[object.id]=object});for(var i=0;i<list.length;i++){var object=list[i];var fetchedObject=fetchedObjectsById[object.id];if(!fetchedObject&&forceFetch){var error=new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,"All objects must exist on the server");return Parse.Promise.error(error)}object._mergeFromObject(fetchedObject)}return Parse.Promise.as(list)};Parse.Object._fetchAll=function(list,forceFetch){if(list.length===0){return Parse.Promise.as(list)}var omitObjectsWithData=!forceFetch;return Parse.Object._toObjectIdArray(list,omitObjectsWithData).then(function(objectIds){var className=list[0].className;var query=new Parse.Query(className);query.containedIn("objectId",objectIds);query.limit=objectIds.length;return query.find()}).then(function(results){return Parse.Object._updateWithFetchedResults(list,results,forceFetch)})};Parse.Object._classMap={};Parse.Object._extend=Parse._extend;Parse.Object.extend=function(className,protoProps,classProps){if(!_.isString(className)){if(className&&_.has(className,"className")){return Parse.Object.extend(className.className,className,protoProps)}else{throw new Error("Parse.Object.extend's first argument should be the className.")}}if(className==="User"&&Parse.User._performUserRewrite){className="_User"}protoProps=protoProps||{};protoProps.className=className;var NewClassObject=null;if(_.has(Parse.Object._classMap,className)){var OldClassObject=Parse.Object._classMap[className];NewClassObject=OldClassObject._extend(protoProps,classProps)}else{NewClassObject=this._extend(protoProps,classProps)}NewClassObject.extend=function(arg0){if(_.isString(arg0)||arg0&&_.has(arg0,"className")){return Parse.Object.extend.apply(NewClassObject,arguments)}var newArguments=[className].concat(Parse._.toArray(arguments));return Parse.Object.extend.apply(NewClassObject,newArguments)};Parse.Object._classMap[className]=NewClassObject;return NewClassObject};Parse.Object._findUnsavedChildren=function(object,children,files){Parse._traverse(object,function(object){if(object instanceof Parse.Object){object._refreshCache();if(object.dirty()){children.push(object)}return}if(object instanceof Parse.File){if(!object.url()){files.push(object)}return}})};Parse.Object._canBeSerializedAsValue=function(object){if(object instanceof Parse.Object){return!!object.id}if(object instanceof Parse.File){return true}var canBeSerializedAsValue=true;if(_.isArray(object)){Parse._arrayEach(object,function(child){if(!Parse.Object._canBeSerializedAsValue(child)){canBeSerializedAsValue=false}})}else if(_.isObject(object)){Parse._objectEach(object,function(child){if(!Parse.Object._canBeSerializedAsValue(child)){canBeSerializedAsValue=false}})}return canBeSerializedAsValue};Parse.Object._deepSaveAsync=function(object,options){var unsavedChildren=[];var unsavedFiles=[];Parse.Object._findUnsavedChildren(object,unsavedChildren,unsavedFiles);var promise=Parse.Promise.as();_.each(unsavedFiles,function(file){promise=promise.then(function(){return file.save(options)})});var objects=_.uniq(unsavedChildren);var remaining=_.uniq(objects);return promise.then(function(){return Parse.Promise._continueWhile(function(){return remaining.length>0},function(){var batch=[];var newRemaining=[];Parse._arrayEach(remaining,function(object){if(batch.length>20){newRemaining.push(object);return}if(object._canBeSerialized()){batch.push(object)}else{newRemaining.push(object)}});remaining=newRemaining;if(batch.length===0){return Parse.Promise.error(new Parse.Error(Parse.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var readyToStart=Parse.Promise.when(_.map(batch,function(object){return object._allPreviousSaves||Parse.Promise.as()}));var batchFinished=new Parse.Promise;Parse._arrayEach(batch,function(object){object._allPreviousSaves=batchFinished});return readyToStart._continueWith(function(){return Parse._request({route:"batch",method:"POST",useMasterKey:options.useMasterKey,data:{requests:_.map(batch,function(object){var json=object._getSaveJSON();var method="POST";var path="/1/classes/"+object.className;if(object.id){path=path+"/"+object.id;method="PUT"}object._startSave();return{method:method,path:path,body:json}})}}).then(function(response,status,xhr){var error;Parse._arrayEach(batch,function(object,i){if(response[i].success){object._finishSave(object.parse(response[i].success,status,xhr))}else{error=error||response[i].error;object._cancelSave()}});if(error){return Parse.Promise.error(new Parse.Error(error.code,error.error))}}).then(function(results){batchFinished.resolve(results);return results},function(error){batchFinished.reject(error);return Parse.Promise.error(error)})})})}).then(function(){return object})}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Role=Parse.Object.extend("_Role",{constructor:function(name,acl){if(_.isString(name)&&acl instanceof Parse.ACL){Parse.Object.prototype.constructor.call(this,null,null);this.setName(name);this.setACL(acl)}else{Parse.Object.prototype.constructor.call(this,name,acl)}},getName:function(){return this.get("name")},setName:function(name,options){return this.set("name",name,options)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(attrs,options){if("name"in attrs&&attrs.name!==this.getName()){var newName=attrs.name;if(this.id&&this.id!==attrs.objectId){return new Parse.Error(Parse.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!_.isString(newName)){return new Parse.Error(Parse.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!/^[0-9a-zA-Z\-_ ]+$/.test(newName)){return new Parse.Error(Parse.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _,"+" -, and spaces.")}}if(Parse.Object.prototype.validate){return Parse.Object.prototype.validate.call(this,attrs,options)}return false}})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Collection=function(models,options){options=options||{};if(options.comparator){this.comparator=options.comparator}if(options.model){this.model=options.model}if(options.query){this.query=options.query}this._reset();this.initialize.apply(this,arguments);if(models){this.reset(models,{silent:true,parse:options.parse})}};_.extend(Parse.Collection.prototype,Parse.Events,{model:Parse.Object,initialize:function(){},toJSON:function(){return this.map(function(model){return model.toJSON()})},add:function(models,options){var i,index,length,model,cid,id,cids={},ids={};options=options||{};models=_.isArray(models)?models.slice():[models];for(i=0,length=models.length;i<length;i++){models[i]=this._prepareModel(models[i],options);model=models[i];if(!model){throw new Error("Can't add an invalid model to a collection")}cid=model.cid;if(cids[cid]||this._byCid[cid]){throw new Error("Duplicate cid: can't add the same model "+"to a collection twice")}id=model.id;if(!Parse._isNullOrUndefined(id)&&(ids[id]||this._byId[id])){throw new Error("Duplicate id: can't add the same model "+"to a collection twice")}ids[id]=model;cids[cid]=model}for(i=0;i<length;i++){(model=models[i]).on("all",this._onModelEvent,this);this._byCid[model.cid]=model;if(model.id){this._byId[model.id]=model}}this.length+=length;index=Parse._isNullOrUndefined(options.at)?this.models.length:options.at;this.models.splice.apply(this.models,[index,0].concat(models));if(this.comparator){this.sort({silent:true})}if(options.silent){return this}for(i=0,length=this.models.length;i<length;i++){model=this.models[i];if(cids[model.cid]){options.index=i;model.trigger("add",model,this,options)}}return this},remove:function(models,options){var i,l,index,model;options=options||{};models=_.isArray(models)?models.slice():[models];for(i=0,l=models.length;i<l;i++){model=this.getByCid(models[i])||this.get(models[i]);if(!model){continue}delete this._byId[model.id];delete this._byCid[model.cid];index=this.indexOf(model);this.models.splice(index,1);this.length--;if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}this._removeReference(model)}return this},get:function(id){return id&&this._byId[id.id||id]},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid]},at:function(index){return this.models[index]},sort:function(options){options=options||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var boundComparator=_.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(boundComparator)}else{this.models.sort(boundComparator)}if(!options.silent){this.trigger("reset",this,options)}return this},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr)})},reset:function(models,options){var self=this;models=models||[];options=options||{};Parse._arrayEach(this.models,function(model){self._removeReference(model)});this._reset();this.add(models,{silent:true,parse:options.parse});if(!options.silent){this.trigger("reset",this,options)}return this},fetch:function(options){options=_.clone(options)||{};if(options.parse===undefined){options.parse=true}var collection=this;var query=this.query||new Parse.Query(this.model);return query.find({useMasterKey:options.useMasterKey}).then(function(results){if(options.add){collection.add(results,options)}else{collection.reset(results,options)}return collection})._thenRunCallbacks(options,this)},create:function(model,options){var coll=this;options=options?_.clone(options):{};model=this._prepareModel(model,options);if(!model){return false}if(!options.wait){coll.add(model,options)}var success=options.success;options.success=function(nextModel,resp,xhr){if(options.wait){coll.add(nextModel,options)}if(success){success(nextModel,resp)}else{nextModel.trigger("sync",model,resp,options)}};model.save(null,options);return model},parse:function(resp,xhr){return resp},chain:function(){return _(this.models).chain()},_reset:function(options){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(model,options){if(!(model instanceof Parse.Object)){var attrs=model;options.collection=this;model=new this.model(attrs,options);if(!model._validate(model.attributes,options)){model=false}}else if(!model.collection){model.collection=this}return model},_removeReference:function(model){if(this===model.collection){delete model.collection}model.off("all",this._onModelEvent,this)},_onModelEvent:function(ev,model,collection,options){if((ev==="add"||ev==="remove")&&collection!==this){return}if(ev==="destroy"){this.remove(model,options)}if(model&&ev==="change:objectId"){delete this._byId[model.previous("objectId")];this._byId[model.id]=model}this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];Parse._arrayEach(methods,function(method){Parse.Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)))}});Parse.Collection.extend=Parse._extend})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.View=function(options){this.cid=_.uniqueId("view");this._configure(options||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var eventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName"];_.extend(Parse.View.prototype,Parse.Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(tagName,attributes,content){var el=document.createElement(tagName);if(attributes){Parse.$(el).attr(attributes)}if(content){Parse.$(el).html(content)}return el},setElement:function(element,delegate){this.$el=Parse.$(element);this.el=this.$el[0];if(delegate!==false){this.delegateEvents()}return this},delegateEvents:function(events){events=events||Parse._getValue(this,"events");if(!events){return}this.undelegateEvents();var self=this;Parse._objectEach(events,function(method,key){if(!_.isFunction(method)){method=self[events[key]]}if(!method){throw new Error('Event "'+events[key]+'" does not exist')}var match=key.match(eventSplitter);var eventName=match[1],selector=match[2];method=_.bind(method,self);eventName+=".delegateEvents"+self.cid;if(selector===""){self.$el.bind(eventName,method)}else{self.$el.delegate(selector,eventName,method)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(options){if(this.options){options=_.extend({},this.options,options)}var self=this;_.each(viewOptions,function(attr){if(options[attr]){self[attr]=options[attr]}});this.options=options},_ensureElement:function(){if(!this.el){var attrs=Parse._getValue(this,"attributes")||{};if(this.id){attrs.id=this.id}if(this.className){attrs["class"]=this.className}this.setElement(this.make(this.tagName,attrs),false)}else{this.setElement(this.el,false)}}});Parse.View.extend=Parse._extend})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.User=Parse.Object.extend("_User",{_isCurrentUser:false,_mergeFromObject:function(other){if(other.getSessionToken()){this._sessionToken=other.getSessionToken()}Parse.User.__super__._mergeFromObject.call(this,other)},_mergeMagicFields:function(attrs){if(attrs.sessionToken){this._sessionToken=attrs.sessionToken;delete attrs.sessionToken}Parse.User.__super__._mergeMagicFields.call(this,attrs)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var authData=this.get("authData");if(!authData){return}Parse._objectEach(this.get("authData"),function(value,key){if(!authData[key]){delete authData[key]}})},_synchronizeAllAuthData:function(){var authData=this.get("authData");if(!authData){return}var self=this;Parse._objectEach(this.get("authData"),function(value,key){self._synchronizeAuthData(key)})},_synchronizeAuthData:function(provider){if(!this.isCurrent()){return}var authType;if(_.isString(provider)){authType=provider;provider=Parse.User._authProviders[authType]}else{authType=provider.getAuthType()}var authData=this.get("authData");if(!authData||!provider){return}var success=provider.restoreAuthentication(authData[authType]);if(!success){this._unlinkFrom(provider)}},_handleSaveResult:function(makeCurrent){if(makeCurrent){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(makeCurrent||this.isCurrent()){Parse.User._saveCurrentUser(this);
}},_linkWith:function(provider,options){var authType;if(_.isString(provider)){authType=provider;provider=Parse.User._authProviders[provider]}else{authType=provider.getAuthType()}if(_.has(options,"authData")){var authData=this.get("authData")||{};authData[authType]=options.authData;this.set("authData",authData);var newOptions=_.clone(options)||{};newOptions.success=function(model){model._handleSaveResult(true);if(options.success){options.success.apply(this,arguments)}};return this.save({authData:authData},newOptions)}else{var self=this;var promise=new Parse.Promise;provider.authenticate({success:function(provider,result){self._linkWith(provider,{authData:result,success:options.success,error:options.error}).then(function(){promise.resolve(self)})},error:function(provider,error){if(options.error){options.error(self,error)}promise.reject(error)}});return promise}},_unlinkFrom:function(provider,options){var authType;if(_.isString(provider)){authType=provider;provider=Parse.User._authProviders[provider]}else{authType=provider.getAuthType()}var newOptions=_.clone(options);var self=this;newOptions.authData=null;newOptions.success=function(model){self._synchronizeAuthData(provider);if(options.success){options.success.apply(this,arguments)}};return this._linkWith(provider,newOptions)},_isLinked:function(provider){var authType;if(_.isString(provider)){authType=provider}else{authType=provider.getAuthType()}var authData=this.get("authData")||{};return!!authData[authType]},_logOutWithAll:function(){var authData=this.get("authData");if(!authData){return}var self=this;Parse._objectEach(this.get("authData"),function(value,key){self._logOutWith(key)})},_logOutWith:function(provider){if(!this.isCurrent()){return}if(_.isString(provider)){provider=Parse.User._authProviders[provider]}if(provider&&provider.deauthenticate){provider.deauthenticate()}},signUp:function(attrs,options){var error;options=options||{};var username=attrs&&attrs.username||this.get("username");if(!username||username===""){error=new Parse.Error(Parse.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(options&&options.error){options.error(this,error)}return Parse.Promise.error(error)}var password=attrs&&attrs.password||this.get("password");if(!password||password===""){error=new Parse.Error(Parse.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(options&&options.error){options.error(this,error)}return Parse.Promise.error(error)}var newOptions=_.clone(options);newOptions.success=function(model){model._handleSaveResult(true);if(options.success){options.success.apply(this,arguments)}};return this.save(attrs,newOptions)},logIn:function(options){var model=this;options=options||{};var request=Parse._request({route:"login",method:"GET",useMasterKey:options.useMasterKey,data:this.toJSON()});return request.then(function(resp,status,xhr){var serverAttrs=model.parse(resp,status,xhr);model._finishFetch(serverAttrs);model._handleSaveResult(true);return model})._thenRunCallbacks(options,this)},save:function(arg1,arg2,arg3){var i,attrs,current,options,saved;if(_.isObject(arg1)||_.isNull(arg1)||_.isUndefined(arg1)){attrs=arg1;options=arg2}else{attrs={};attrs[arg1]=arg2;options=arg3}options=options||{};var newOptions=_.clone(options);newOptions.success=function(model){model._handleSaveResult(false);if(options.success){options.success.apply(this,arguments)}};return Parse.Object.prototype.save.call(this,attrs,newOptions)},fetch:function(options){var newOptions=options?_.clone(options):{};newOptions.success=function(model){model._handleSaveResult(false);if(options&&options.success){options.success.apply(this,arguments)}};return Parse.Object.prototype.fetch.call(this,newOptions)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(username,options){return this.set("username",username,options)},setPassword:function(password,options){return this.set("password",password,options)},getEmail:function(){return this.get("email")},setEmail:function(email,options){return this.set("email",email,options)},authenticated:function(){return!!this._sessionToken&&(Parse.User.current()&&Parse.User.current().id===this.id)},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:true,signUp:function(username,password,attrs,options){attrs=attrs||{};attrs.username=username;attrs.password=password;var user=Parse.Object._create("_User");return user.signUp(attrs,options)},logIn:function(username,password,options){var user=Parse.Object._create("_User");user._finishFetch({username:username,password:password});return user.logIn(options)},become:function(sessionToken,options){options=options||{};var user=Parse.Object._create("_User");return Parse._request({route:"users",className:"me",method:"GET",useMasterKey:options.useMasterKey,sessionToken:sessionToken}).then(function(resp,status,xhr){var serverAttrs=user.parse(resp,status,xhr);user._finishFetch(serverAttrs);user._handleSaveResult(true);return user})._thenRunCallbacks(options,user)},logOut:function(){if(Parse.User._currentUser!==null){Parse.User._currentUser._logOutWithAll();Parse.User._currentUser._isCurrentUser=false}Parse.User._currentUserMatchesDisk=true;Parse.User._currentUser=null;Parse.localStorage.removeItem(Parse._getParsePath(Parse.User._CURRENT_USER_KEY))},requestPasswordReset:function(email,options){options=options||{};var request=Parse._request({route:"requestPasswordReset",method:"POST",useMasterKey:options.useMasterKey,data:{email:email}});return request._thenRunCallbacks(options)},current:function(){if(Parse.User._currentUser){return Parse.User._currentUser}if(Parse.User._currentUserMatchesDisk){return Parse.User._currentUser}Parse.User._currentUserMatchesDisk=true;var userData=Parse.localStorage.getItem(Parse._getParsePath(Parse.User._CURRENT_USER_KEY));if(!userData){return null}Parse.User._currentUser=Parse.Object._create("_User");Parse.User._currentUser._isCurrentUser=true;var json=JSON.parse(userData);Parse.User._currentUser.id=json._id;delete json._id;Parse.User._currentUser._sessionToken=json._sessionToken;delete json._sessionToken;Parse.User._currentUser._finishFetch(json);Parse.User._currentUser._synchronizeAllAuthData();Parse.User._currentUser._refreshCache();Parse.User._currentUser._opSetQueue=[{}];return Parse.User._currentUser},allowCustomUserClass:function(isAllowed){this._performUserRewrite=!isAllowed},_saveCurrentUser:function(user){if(Parse.User._currentUser!==user){Parse.User.logOut()}user._isCurrentUser=true;Parse.User._currentUser=user;Parse.User._currentUserMatchesDisk=true;var json=user.toJSON();json._id=user.id;json._sessionToken=user._sessionToken;Parse.localStorage.setItem(Parse._getParsePath(Parse.User._CURRENT_USER_KEY),JSON.stringify(json))},_registerAuthenticationProvider:function(provider){Parse.User._authProviders[provider.getAuthType()]=provider;if(Parse.User.current()){Parse.User.current()._synchronizeAuthData(provider.getAuthType())}},_logInWith:function(provider,options){var user=Parse.Object._create("_User");return user._linkWith(provider,options)}})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Query=function(objectClass){if(_.isString(objectClass)){objectClass=Parse.Object._getSubclass(objectClass)}this.objectClass=objectClass;this.className=objectClass.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};Parse.Query.or=function(){var queries=_.toArray(arguments);var className=null;Parse._arrayEach(queries,function(q){if(_.isNull(className)){className=q.className}if(className!==q.className){throw"All queries must be for the same class"}});var query=new Parse.Query(className);query._orQuery(queries);return query};Parse.Query.prototype={get:function(objectId,options){var self=this;self.equalTo("objectId",objectId);var firstOptions={};if(options&&_.has(options,"useMasterKey")){firstOptions={useMasterKey:options.useMasterKey}}return self.first(firstOptions).then(function(response){if(response){return response}var errorObject=new Parse.Error(Parse.Error.OBJECT_NOT_FOUND,"Object not found.");return Parse.Promise.error(errorObject)})._thenRunCallbacks(options,null)},toJSON:function(){var params={where:this._where};if(this._include.length>0){params.include=this._include.join(",")}if(this._select){params.keys=this._select.join(",")}if(this._limit>=0){params.limit=this._limit}if(this._skip>0){params.skip=this._skip}if(this._order!==undefined){params.order=this._order.join(",")}Parse._objectEach(this._extraOptions,function(v,k){params[k]=v});return params},find:function(options){var self=this;options=options||{};var request=Parse._request({route:"classes",className:this.className,method:"GET",useMasterKey:options.useMasterKey,data:this.toJSON()});return request.then(function(response){return _.map(response.results,function(json){var obj;if(response.className){obj=new Parse.Object(response.className)}else{obj=new self.objectClass}obj._finishFetch(json,true);return obj})})._thenRunCallbacks(options)},count:function(options){var self=this;options=options||{};var params=this.toJSON();params.limit=0;params.count=1;var request=Parse._request({route:"classes",className:self.className,method:"GET",useMasterKey:options.useMasterKey,data:params});return request.then(function(response){return response.count})._thenRunCallbacks(options)},first:function(options){var self=this;options=options||{};var params=this.toJSON();params.limit=1;var request=Parse._request({route:"classes",className:this.className,method:"GET",useMasterKey:options.useMasterKey,data:params});return request.then(function(response){return _.map(response.results,function(json){var obj=new self.objectClass;obj._finishFetch(json,true);return obj})[0]})._thenRunCallbacks(options)},collection:function(items,options){options=options||{};return new Parse.Collection(items,_.extend(options,{model:this.objectClass,query:this}))},skip:function(n){this._skip=n;return this},limit:function(n){this._limit=n;return this},equalTo:function(key,value){if(_.isUndefined(value)){return this.doesNotExist(key)}this._where[key]=Parse._encode(value);return this},_addCondition:function(key,condition,value){if(!this._where[key]){this._where[key]={}}this._where[key][condition]=Parse._encode(value);return this},notEqualTo:function(key,value){this._addCondition(key,"$ne",value);return this},lessThan:function(key,value){this._addCondition(key,"$lt",value);return this},greaterThan:function(key,value){this._addCondition(key,"$gt",value);return this},lessThanOrEqualTo:function(key,value){this._addCondition(key,"$lte",value);return this},greaterThanOrEqualTo:function(key,value){this._addCondition(key,"$gte",value);return this},containedIn:function(key,values){this._addCondition(key,"$in",values);return this},notContainedIn:function(key,values){this._addCondition(key,"$nin",values);return this},containsAll:function(key,values){this._addCondition(key,"$all",values);return this},exists:function(key){this._addCondition(key,"$exists",true);return this},doesNotExist:function(key){this._addCondition(key,"$exists",false);return this},matches:function(key,regex,modifiers){this._addCondition(key,"$regex",regex);if(!modifiers){modifiers=""}if(regex.ignoreCase){modifiers+="i"}if(regex.multiline){modifiers+="m"}if(modifiers&&modifiers.length){this._addCondition(key,"$options",modifiers)}return this},matchesQuery:function(key,query){var queryJSON=query.toJSON();queryJSON.className=query.className;this._addCondition(key,"$inQuery",queryJSON);return this},doesNotMatchQuery:function(key,query){var queryJSON=query.toJSON();queryJSON.className=query.className;this._addCondition(key,"$notInQuery",queryJSON);return this},matchesKeyInQuery:function(key,queryKey,query){var queryJSON=query.toJSON();queryJSON.className=query.className;this._addCondition(key,"$select",{key:queryKey,query:queryJSON});return this},doesNotMatchKeyInQuery:function(key,queryKey,query){var queryJSON=query.toJSON();queryJSON.className=query.className;this._addCondition(key,"$dontSelect",{key:queryKey,query:queryJSON});return this},_orQuery:function(queries){var queryJSON=_.map(queries,function(q){return q.toJSON().where});this._where.$or=queryJSON;return this},_quote:function(s){return"\\Q"+s.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(key,value){this._addCondition(key,"$regex",this._quote(value));return this},startsWith:function(key,value){this._addCondition(key,"$regex","^"+this._quote(value));return this},endsWith:function(key,value){this._addCondition(key,"$regex",this._quote(value)+"$");return this},ascending:function(){this._order=[];return this.addAscending.apply(this,arguments)},addAscending:function(key){var self=this;if(!this._order){this._order=[]}Parse._arrayEach(arguments,function(key){if(Array.isArray(key)){key=key.join()}self._order=self._order.concat(key.replace(/\s/g,"").split(","))});return this},descending:function(key){this._order=[];return this.addDescending.apply(this,arguments)},addDescending:function(key){var self=this;if(!this._order){this._order=[]}Parse._arrayEach(arguments,function(key){if(Array.isArray(key)){key=key.join()}self._order=self._order.concat(_.map(key.replace(/\s/g,"").split(","),function(k){return"-"+k}))});return this},near:function(key,point){if(!(point instanceof Parse.GeoPoint)){point=new Parse.GeoPoint(point)}this._addCondition(key,"$nearSphere",point);return this},withinRadians:function(key,point,distance){this.near(key,point);this._addCondition(key,"$maxDistance",distance);return this},withinMiles:function(key,point,distance){return this.withinRadians(key,point,distance/3958.8)},withinKilometers:function(key,point,distance){return this.withinRadians(key,point,distance/6371)},withinGeoBox:function(key,southwest,northeast){if(!(southwest instanceof Parse.GeoPoint)){southwest=new Parse.GeoPoint(southwest)}if(!(northeast instanceof Parse.GeoPoint)){northeast=new Parse.GeoPoint(northeast)}this._addCondition(key,"$within",{$box:[southwest,northeast]});return this},include:function(){var self=this;Parse._arrayEach(arguments,function(key){if(_.isArray(key)){self._include=self._include.concat(key)}else{self._include.push(key)}});return this},select:function(){var self=this;this._select=this._select||[];Parse._arrayEach(arguments,function(key){if(_.isArray(key)){self._select=self._select.concat(key)}else{self._select.push(key)}});return this},each:function(callback,options){options=options||{};if(this._order||this._skip||this._limit>=0){var error="Cannot iterate on a query with sort, skip, or limit.";return Parse.Promise.error(error)._thenRunCallbacks(options)}var promise=new Parse.Promise;var query=new Parse.Query(this.objectClass);query._limit=options.batchSize||100;query._where=_.clone(this._where);query._include=_.clone(this._include);query.ascending("objectId");var findOptions={};if(_.has(options,"useMasterKey")){findOptions.useMasterKey=options.useMasterKey}var finished=false;return Parse.Promise._continueWhile(function(){return!finished},function(){return query.find(findOptions).then(function(results){var callbacksDone=Parse.Promise.as();Parse._.each(results,function(result){callbacksDone=callbacksDone.then(function(){return callback(result)})});return callbacksDone.then(function(){if(results.length>=query._limit){query.greaterThan("objectId",results[results.length-1].id)}else{finished=true}})})})._thenRunCallbacks(options)}}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;var PUBLIC_KEY="*";var initialized=false;var requestedPermissions;var initOptions;var provider={authenticate:function(options){var self=this;FB.login(function(response){if(response.authResponse){if(options.success){options.success(self,{id:response.authResponse.userID,access_token:response.authResponse.accessToken,expiration_date:new Date(response.authResponse.expiresIn*1e3+(new Date).getTime()).toJSON()})}}else{if(options.error){options.error(self,response)}}},{scope:requestedPermissions})},restoreAuthentication:function(authData){if(authData){var authResponse={userID:authData.id,accessToken:authData.access_token,expiresIn:(Parse._parseDate(authData.expiration_date).getTime()-(new Date).getTime())/1e3};var newOptions=_.clone(initOptions);newOptions.authResponse=authResponse;newOptions.status=false;var existingResponse=FB.getAuthResponse();if(existingResponse&&existingResponse.userID!==authResponse.userID){FB.logout()}FB.init(newOptions)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};Parse.FacebookUtils={init:function(options){if(typeof FB==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}initOptions=_.clone(options)||{};if(initOptions.status&&typeof console!=="undefined"){var warn=console.warn||console.log||function(){};warn.call(console,"The 'status' flag passed into"+" FB.init, when set to true, can interfere with Parse Facebook"+" integration, so it has been suppressed. Please call"+" FB.getLoginStatus() explicitly if you require this behavior.")}initOptions.status=false;FB.init(initOptions);Parse.User._registerAuthenticationProvider(provider);initialized=true},isLinked:function(user){return user._isLinked("facebook")},logIn:function(permissions,options){if(!permissions||_.isString(permissions)){if(!initialized){throw"You must initialize FacebookUtils before calling logIn."}requestedPermissions=permissions;return Parse.User._logInWith("facebook",options)}else{var newOptions=_.clone(options)||{};newOptions.authData=permissions;return Parse.User._logInWith("facebook",newOptions)}},link:function(user,permissions,options){if(!permissions||_.isString(permissions)){if(!initialized){throw"You must initialize FacebookUtils before calling link."}requestedPermissions=permissions;return user._linkWith("facebook",options)}else{var newOptions=_.clone(options)||{};newOptions.authData=permissions;return user._linkWith("facebook",newOptions)}},unlink:function(user,options){if(!initialized){throw"You must initialize FacebookUtils before calling unlink."}return user._unlinkFrom("facebook",options)}}})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.History=function(){this.handlers=[];_.bindAll(this,"checkUrl")};var routeStripper=/^[#\/]/;var isExplorer=/msie [\w.]+/;Parse.History.started=false;_.extend(Parse.History.prototype,Parse.Events,{interval:50,getHash:function(windowOverride){var loc=windowOverride?windowOverride.location:window.location;var match=loc.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(Parse._isNullOrUndefined(fragment)){if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;if(search){fragment+=search}}else{fragment=this.getHash()}}if(!fragment.indexOf(this.options.root)){fragment=fragment.substr(this.options.root.length)}return fragment.replace(routeStripper,"")},start:function(options){if(Parse.History.started){throw new Error("Parse.history has already been started")}Parse.History.started=true;this.options=_.extend({},{root:"/"},this.options,options);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment();var docMode=document.documentMode;var oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);if(oldIE){this.iframe=Parse.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(fragment)}if(this._hasPushState){Parse.$(window).bind("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE){Parse.$(window).bind("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}this.fragment=fragment;var loc=window.location;var atRoot=loc.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else if(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash){this.fragment=this.getHash().replace(routeStripper,"");window.history.replaceState({},document.title,loc.protocol+"//"+loc.host+this.options.root+this.fragment)}if(!this.options.silent){return this.loadUrl()}},stop:function(){Parse.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);Parse.History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getFragment(this.getHash(this.iframe))}if(current===this.fragment){return false}if(this.iframe){this.navigate(current)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride);var matched=_.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}});return matched},navigate:function(fragment,options){if(!Parse.History.started){return false}if(!options||options===true){options={trigger:options}}var frag=(fragment||"").replace(routeStripper,"");if(this.fragment===frag){return}if(this._hasPushState){if(frag.indexOf(this.options.root)!==0){frag=this.options.root+frag}this.fragment=frag;var replaceOrPush=options.replace?"replaceState":"pushState";window.history[replaceOrPush]({},document.title,frag)}else if(this._wantsHashChange){this.fragment=frag;this._updateHash(window.location,frag,options.replace);if(this.iframe&&frag!==this.getFragment(this.getHash(this.iframe))){if(!options.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,frag,options.replace)}}else{window.location.assign(this.options.root+fragment)}if(options.trigger){this.loadUrl(fragment)}},_updateHash:function(location,fragment,replace){if(replace){var s=location.toString().replace(/(javascript:|#).*$/,"");location.replace(s+"#"+fragment)}else{location.hash=fragment}}})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Router=function(options){options=options||{};if(options.routes){this.routes=options.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var namedParam=/:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;_.extend(Parse.Router.prototype,Parse.Events,{initialize:function(){},route:function(route,name,callback){Parse.history=Parse.history||new Parse.History;if(!_.isRegExp(route)){route=this._routeToRegExp(route)}if(!callback){callback=this[name]}Parse.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);if(callback){callback.apply(this,args)}this.trigger.apply(this,["route:"+name].concat(args));Parse.history.trigger("route",this,name,args)},this));return this},navigate:function(fragment,options){Parse.history.navigate(fragment,options)},_bindRoutes:function(){if(!this.routes){return}var routes=[];for(var route in this.routes){if(this.routes.hasOwnProperty(route)){routes.unshift([route,this.routes[route]])}}for(var i=0,l=routes.length;i<l;i++){this.route(routes[i][0],routes[i][1],this[routes[i][1]])}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]+)").replace(splatParam,"(.*?)");return new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});Parse.Router.extend=Parse._extend})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;var _=Parse._;Parse.Cloud=Parse.Cloud||{};_.extend(Parse.Cloud,{run:function(name,data,options){options=options||{};var request=Parse._request({route:"functions",className:name,method:"POST",useMasterKey:options.useMasterKey,data:Parse._encode(data,null,true)});return request.then(function(resp){return Parse._decode(null,resp).result})._thenRunCallbacks(options)}})})(this);(function(root){root.Parse=root.Parse||{};var Parse=root.Parse;Parse.Installation=Parse.Object.extend("_Installation");Parse.Push=Parse.Push||{};Parse.Push.send=function(data,options){options=options||{};if(data.where){data.where=data.where.toJSON().where}if(data.push_time){data.push_time=data.push_time.toJSON()}if(data.expiration_time){data.expiration_time=data.expiration_time.toJSON()}if(data.expiration_time&&data.expiration_interval){throw"Both expiration_time and expiration_interval can't be set"}var request=Parse._request({route:"push",method:"POST",data:data,useMasterKey:options.useMasterKey});return request._thenRunCallbacks(options)}})(this);(function(window,undef){var angular=window.angular;if(angular!==undef){var module=angular.module("parse-angular",[]);module.run(["$q","$window",function($q,$window){if(!angular.isUndefined($window.Parse)&&angular.isObject($window.Parse)){var Parse=$window.Parse;var methodsToUpdate={Object:{prototype:["save","fetch","destroy"],"static":["saveAll","destroyAll"]},Collection:{prototype:["fetch"],"static":[]},Query:{prototype:["find","first","count","get"],"static":[]},Cloud:{prototype:[],"static":["run"]},User:{prototype:["signUp"],"static":["requestPasswordReset","logIn"]},FacebookUtils:{prototype:[],"static":["logIn","link","unlink"]}};for(var k in methodsToUpdate){var currentClass=k;var currentObject=methodsToUpdate[k];var currentProtoMethods=currentObject.prototype;var currentStaticMethods=currentObject.static;currentProtoMethods.forEach(function(method){var origMethod=Parse[currentClass].prototype[method];Parse[currentClass].prototype[method]=function(){return origMethod.apply(this,arguments).then(function(data){var defer=$q.defer();defer.resolve(data);return defer.promise},function(err){var defer=$q.defer();defer.reject(err);return defer.promise})}});currentStaticMethods.forEach(function(method){var origMethod=Parse[currentClass][method];Parse[currentClass][method]=function(){return origMethod.apply(this,arguments).then(function(data){var defer=$q.defer();defer.resolve(data);return defer.promise},function(err){var defer=$q.defer();defer.reject(err);return defer.promise})}})}}}]);angular.module("parse-angular.enhance",["parse-angular"]).run(["$q","$window",function($q,$window){if(!angular.isUndefined($window.Parse)&&angular.isObject($window.Parse)){var Parse=$window.Parse;Parse.Object.getClass=function(className){return Parse.Object._classMap[className]};function capitaliseFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}var origObjectExtend=Parse.Object.extend;Parse.Object.extend=function(protoProps){var newClass=origObjectExtend.apply(this,arguments);if(Parse._.isObject(protoProps)&&Parse._.isArray(protoProps.attrs)){var attrs=protoProps.attrs;Parse._.each(attrs,function(currentAttr){var field=capitaliseFirstLetter(currentAttr);if(!newClass.prototype["get"+field]){newClass.prototype["get"+field]=function(){return this.get(currentAttr)}}if(!newClass.prototype["set"+field]){newClass.prototype["set"+field]=function(data){this.set(currentAttr,data);return this}}})}return newClass};Parse.Collection._classMap={};var origExtend=Parse.Collection.extend;Parse.Collection.extend=function(opts){var extended=origExtend.apply(this,arguments);if(opts&&opts.className){Parse.Collection._classMap[opts.className]=extended}return extended};Parse.Collection.getClass=function(className){return Parse.Collection._classMap[className]};Parse.Collection.prototype=angular.extend(Parse.Collection.prototype,{loadMore:function(opts){if(!angular.isUndefined(this.query)){var currentLimit=this.query._limit==-1?100:this.query._limit;var currentSkip=this.query._skip;currentSkip+=currentLimit;this.query.skip(currentSkip);var _this=this;return this.query.find().then(function(newModels){if(!opts||opts.add!==false)_this.add(newModels);if(newModels.length<currentLimit)_this.hasMoreToLoad=false;return newModels})}}})}}])}})(this);function parseDot(object,columns){columns.map(function(prop){Object.defineProperty(object,prop,{get:function(){return object.get(prop)},set:function(val){return object.set(prop,val)},configurable:true})})}function angularParseCopy(source,destination){angular.copy(source,destination);destination.initialize()}window.fbAsyncInit=function(){FB.init({appId:"1569830073296681",xfbml:true,version:"v2.3"})};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),
c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b))}function f(){h&&(c.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element){c.$element.addClass(f);{c.$element[0].offsetWidth}angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(c,j.currentSlide)}else h(c,j.currentSlide);j.currentSlide=c,l=i,e()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next")},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?j.select(b>=k.length?k[b-1]:k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var a=f(r);return function(b,c,d){function f(){D.isOpen?l():j()}function j(){(!C||b.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){b.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),D.$digest(),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=a(x,function(a){A?h.find("body").append(a):c.after(a)})}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?c.bind(B.show,f):(c.bind(B.show,j),c.bind(B.hide,l))}var w,x,y,z,A=angular.isDefined(n.appendToBody)?n.appendToBody:!1,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=b.$new(!0),E=function(){var a=i.positionElements(c,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){c.unbind(B.show,j),c.unbind(B.hide,l)};v();var G=b.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=b.$eval(d[k+"AppendToBody"]);
A=angular.isDefined(H)?H:A,A&&b.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),b.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);angular.module("ui.validate",[]).directive("uiValidate",function(){"use strict";return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(b){return angular.isString(b)?void a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})}):angular.isArray(b)?void angular.forEach(b,function(b){a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})})}):void(angular.isObject(b)&&angular.forEach(b,function(b,c){angular.isString(b)&&a.$watch(b,function(){g[c](d.$modelValue)}),angular.isArray(b)&&angular.forEach(b,function(b){a.$watch(b,function(){g[c](d.$modelValue)})})}))}var f,g={},h=a.$eval(c.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(b,c){f=function(e){var f=a.$eval(b,{$value:e});return angular.isObject(f)&&angular.isFunction(f.then)?(f.then(function(){d.$setValidity(c,!0)},function(){d.$setValidity(c,!1)}),e):f?(d.$setValidity(c,!0),e):(d.$setValidity(c,!1),e)},g[c]=f,d.$formatters.push(f),d.$parsers.push(f)}),c.uiValidateWatch&&e(a.$eval(c.uiValidateWatch)))}}});
//# sourceMappingURL=lib.min.js.map